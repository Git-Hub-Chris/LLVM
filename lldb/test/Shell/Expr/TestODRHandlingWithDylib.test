# REQUIRES: system-darwin

# RUN: %clangxx_host %p/Inputs/name-conflict-test/plugin.cpp -shared -gdwarf -O0 -o %t.plugin.dylib
#
# RUN: %clangxx_host %p/Inputs/name-conflict-test/main.cpp \
# RUN:               %p/Inputs/name-conflict-test/service.cpp \
# RUN:               -DPLUGIN_PATH=\"%t.plugin.dylib\" \
# RUN:               -DHIDE_FROM_PLUGIN \
# RUN:               -gdwarf -O0 -o %t.a.out
#
# RUN: %lldb %t.a.out \
# RUN:     -o "b plugin_entry" \
# RUN:     -o run \
# RUN:     -o "expr *gProxyThis" \
# RUN:     -o exit | FileCheck  %s

# CHECK: (lldb) expr *gProxyThis
