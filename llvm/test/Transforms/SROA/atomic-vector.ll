; NOTE: Assertions have been autogenerated by utils/update_test_checks.py UTC_ARGS: --version 5
; RUN: opt < %s -passes='sroa' -S | FileCheck %s

define float @atomic_vector() {
; CHECK-LABEL: define float @atomic_vector() {
; CHECK-NEXT:    [[TMP1:%.*]] = alloca <1 x float>, align 4
; CHECK-NEXT:    store <1 x float> undef, ptr [[TMP1]], align 4
; CHECK-NEXT:    [[TMP2:%.*]] = load atomic volatile float, ptr [[TMP1]] acquire, align 4
; CHECK-NEXT:    ret float [[TMP2]]
;
  %1 = alloca <1 x float>
  %2 = alloca <1 x float>
  %3 = alloca ptr
  call void @llvm.memcpy.p0.p0.i64(ptr %2, ptr %1, i64 4, i1 false)
  store ptr %2, ptr %3
  %4 = load ptr, ptr %3
  %5 = load atomic volatile float, ptr %4 acquire, align 4
  ret float %5
}
