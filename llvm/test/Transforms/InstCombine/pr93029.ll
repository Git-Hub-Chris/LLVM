; NOTE: Assertions have been autogenerated by utils/update_test_checks.py UTC_ARGS: --version 5
; RUN: opt -S -passes=instcombine < %s | FileCheck %s

@global = external global i32
@global_arr = constant [2 x ptr] [ptr @global, ptr @global]

define i1 @pr93029(i64 %idx) {
; CHECK-LABEL: define i1 @pr93029(
; CHECK-SAME: i64 [[IDX:%.*]]) {
; CHECK-NEXT:  [[ENTRY:.*:]]
; CHECK-NEXT:    [[ARRAYIDX:%.*]] = getelementptr [2 x ptr], ptr @global_arr, i64 0, i64 [[IDX]]
; CHECK-NEXT:    [[PTR:%.*]] = load ptr, ptr [[ARRAYIDX]], align 8
; CHECK-NEXT:    [[CMP:%.*]] = icmp ult ptr [[PTR]], inttoptr (i64 10001 to ptr)
; CHECK-NEXT:    ret i1 [[CMP]]
;
entry:
  %arrayidx = getelementptr [2 x ptr], ptr @global_arr, i64 0, i64 %idx
  %ptr = load ptr, ptr %arrayidx, align 8
  %cmp = icmp ult ptr %ptr, inttoptr (i64 10001 to ptr)
  ret i1 %cmp
}
