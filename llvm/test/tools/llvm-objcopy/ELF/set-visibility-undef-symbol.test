## Check that symbols with SHN_UNDEF index are ignored when setting visibility
# RUN: yaml2obj %s -o %t.o
# RUN: llvm-objcopy %t.o --set-symbol-visibility=foo=hidden
# RUN: llvm-readelf -s %t.o | FileCheck %s
# CHECK: DEFAULT   UND foo

!ELF
FileHeader:
  Class:   ELFCLASS64
  Data:    ELFDATA2LSB
  Type:    ET_REL
  Machine: EM_X86_64
Symbols:
  - Name:     foo
    Binding:  STB_LOCAL
    Index:    SHN_UNDEF
