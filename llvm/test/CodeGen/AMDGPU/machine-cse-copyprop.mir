# RUN: llc -mtriple=amdgcn -run-pass=machine-cse -verify-machineinstrs -o - %s | FileCheck %s

# Test to ensure that this does not crash on undefs
# CHECK-LABEL: name: machine-cse-copyprop
# CHECK: IMPLICIT_DEF
# CHECK-NOT: COPY
# CHECK: S_ADD_I32
---
name: machine-cse-copyprop
tracksRegLiveness: true
body:               |
  bb.0:
    %0:sreg_32 = IMPLICIT_DEF
    %1:sreg_32 = IMPLICIT_DEF
    %2:sreg_32 = COPY %0
    %3:sreg_32 = COPY %1
    %4:sreg_64 = REG_SEQUENCE undef %10:sreg_32, %subreg.sub0, %2:sreg_32, %subreg.sub1
    %5:sreg_64 = REG_SEQUENCE undef %11:sreg_32, %subreg.sub0, %3:sreg_32, %subreg.sub1
    %6:sreg_32 = S_ADD_I32 %4.sub1:sreg_64, %5.sub1:sreg_64, implicit-def $scc

...
