; NOTE: Assertions have been autogenerated by utils/update_llc_test_checks.py
; RUN: llc --mtriple=xtensa --verify-machineinstrs < %s | FileCheck %s --check-prefix=LA32

define i32 @m_offset_0(ptr %p) nounwind {
; LA32-LABEL: m_offset_0:
; LA32:         #APP
; LA32-NEXT:    l32i a2, a2, 0
; LA32-NEXT:    #NO_APP
; LA32-NEXT:    ret
  %1 = call i32 asm "l32i $0, $1", "=r,*m"(ptr elementtype(i32) %p)
  ret i32 %1
}

define i32 @m_offset_1020(ptr %p) nounwind {
; LA32-LABEL: m_offset_1020:
; LA32:         #APP
; LA32-NEXT:    l32i a2, a2, 1020
; LA32-NEXT:    #NO_APP
; LA32-NEXT:    ret
  %1 = getelementptr inbounds i8, ptr %p, i32 1020
  %2 = call i32 asm "l32i $0, $1", "=r,*m"(ptr elementtype(i32) %1)
  ret i32 %2
}
