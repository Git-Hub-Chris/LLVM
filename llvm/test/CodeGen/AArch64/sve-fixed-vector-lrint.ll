; NOTE: Assertions have been autogenerated by utils/update_llc_test_checks.py
; RUN: sed 's/iXLen/i32/g' %s | llc -mtriple=aarch64 -mattr=+sve \
; RUN:   -aarch64-sve-vector-bits-min=256 | FileCheck --check-prefixes=CHECK-i32 %s
; RUN: sed 's/iXLen/i64/g' %s | llc -mtriple=aarch64 -mattr=+sve \
; RUN:   -aarch64-sve-vector-bits-min=256 | FileCheck --check-prefixes=CHECK-i64 %s

define <1 x iXLen> @lrint_v1f16(<1 x half> %x) {
; CHECK-i32-LABEL: lrint_v1f16:
; CHECK-i32:       // %bb.0:
; CHECK-i32-NEXT:    frintx h0, h0
; CHECK-i32-NEXT:    fcvtzs w8, h0
; CHECK-i32-NEXT:    fmov s0, w8
; CHECK-i32-NEXT:    ret
;
; CHECK-i64-LABEL: lrint_v1f16:
; CHECK-i64:       // %bb.0:
; CHECK-i64-NEXT:    frintx h0, h0
; CHECK-i64-NEXT:    fcvtzs x8, h0
; CHECK-i64-NEXT:    fmov d0, x8
; CHECK-i64-NEXT:    ret
  %a = call <1 x iXLen> @llvm.lrint.v1iXLen.v1f16(<1 x half> %x)
  ret <1 x iXLen> %a
}
declare <1 x iXLen> @llvm.lrint.v1iXLen.v1f16(<1 x half>)

define <2 x iXLen> @lrint_v2f16(<2 x half> %x) {
; CHECK-i32-LABEL: lrint_v2f16:
; CHECK-i32:       // %bb.0:
; CHECK-i32-NEXT:    // kill: def $d0 killed $d0 def $q0
; CHECK-i32-NEXT:    mov h1, v0.h[1]
; CHECK-i32-NEXT:    frintx h0, h0
; CHECK-i32-NEXT:    frintx h1, h1
; CHECK-i32-NEXT:    fcvtzs w8, h0
; CHECK-i32-NEXT:    fcvtzs w9, h1
; CHECK-i32-NEXT:    fmov s0, w8
; CHECK-i32-NEXT:    mov v0.s[1], w9
; CHECK-i32-NEXT:    // kill: def $d0 killed $d0 killed $q0
; CHECK-i32-NEXT:    ret
;
; CHECK-i64-LABEL: lrint_v2f16:
; CHECK-i64:       // %bb.0:
; CHECK-i64-NEXT:    // kill: def $d0 killed $d0 def $q0
; CHECK-i64-NEXT:    mov h1, v0.h[1]
; CHECK-i64-NEXT:    frintx h0, h0
; CHECK-i64-NEXT:    frintx h1, h1
; CHECK-i64-NEXT:    fcvtzs x8, h0
; CHECK-i64-NEXT:    fcvtzs x9, h1
; CHECK-i64-NEXT:    fmov d0, x8
; CHECK-i64-NEXT:    mov v0.d[1], x9
; CHECK-i64-NEXT:    ret
  %a = call <2 x iXLen> @llvm.lrint.v2iXLen.v2f16(<2 x half> %x)
  ret <2 x iXLen> %a
}
declare <2 x iXLen> @llvm.lrint.v2iXLen.v2f16(<2 x half>)

define <4 x iXLen> @lrint_v4f16(<4 x half> %x) {
; CHECK-i32-LABEL: lrint_v4f16:
; CHECK-i32:       // %bb.0:
; CHECK-i32-NEXT:    frintx v0.4h, v0.4h
; CHECK-i32-NEXT:    fcvtl v0.4s, v0.4h
; CHECK-i32-NEXT:    fcvtzs v0.4s, v0.4s
; CHECK-i32-NEXT:    ret
;
; CHECK-i64-LABEL: lrint_v4f16:
; CHECK-i64:       // %bb.0:
; CHECK-i64-NEXT:    frintx v0.4h, v0.4h
; CHECK-i64-NEXT:    mov h1, v0.h[2]
; CHECK-i64-NEXT:    mov h2, v0.h[3]
; CHECK-i64-NEXT:    mov h3, v0.h[1]
; CHECK-i64-NEXT:    fcvtzs x9, h0
; CHECK-i64-NEXT:    fcvtzs x8, h1
; CHECK-i64-NEXT:    fcvtzs x10, h2
; CHECK-i64-NEXT:    fcvtzs x11, h3
; CHECK-i64-NEXT:    fmov d0, x9
; CHECK-i64-NEXT:    fmov d1, x8
; CHECK-i64-NEXT:    mov v0.d[1], x11
; CHECK-i64-NEXT:    mov v1.d[1], x10
; CHECK-i64-NEXT:    ret
  %a = call <4 x iXLen> @llvm.lrint.v4iXLen.v4f16(<4 x half> %x)
  ret <4 x iXLen> %a
}
declare <4 x iXLen> @llvm.lrint.v4iXLen.v4f16(<4 x half>)

define <8 x iXLen> @lrint_v8f16(<8 x half> %x) {
; CHECK-i32-LABEL: lrint_v8f16:
; CHECK-i32:       // %bb.0:
; CHECK-i32-NEXT:    frintx v2.8h, v0.8h
; CHECK-i32-NEXT:    mov h0, v2.h[4]
; CHECK-i32-NEXT:    mov h1, v2.h[5]
; CHECK-i32-NEXT:    mov h3, v2.h[1]
; CHECK-i32-NEXT:    fcvtzs w9, h2
; CHECK-i32-NEXT:    mov h4, v2.h[6]
; CHECK-i32-NEXT:    fcvtzs w8, h0
; CHECK-i32-NEXT:    mov h0, v2.h[2]
; CHECK-i32-NEXT:    fcvtzs w10, h1
; CHECK-i32-NEXT:    fcvtzs w11, h3
; CHECK-i32-NEXT:    mov h3, v2.h[7]
; CHECK-i32-NEXT:    fcvtzs w12, h4
; CHECK-i32-NEXT:    mov h2, v2.h[3]
; CHECK-i32-NEXT:    fcvtzs w13, h0
; CHECK-i32-NEXT:    fmov s0, w9
; CHECK-i32-NEXT:    fmov s1, w8
; CHECK-i32-NEXT:    fcvtzs w8, h3
; CHECK-i32-NEXT:    fcvtzs w9, h2
; CHECK-i32-NEXT:    mov v0.s[1], w11
; CHECK-i32-NEXT:    mov v1.s[1], w10
; CHECK-i32-NEXT:    mov v0.s[2], w13
; CHECK-i32-NEXT:    mov v1.s[2], w12
; CHECK-i32-NEXT:    mov v0.s[3], w9
; CHECK-i32-NEXT:    mov v1.s[3], w8
; CHECK-i32-NEXT:    ret
;
; CHECK-i64-LABEL: lrint_v8f16:
; CHECK-i64:       // %bb.0:
; CHECK-i64-NEXT:    ext v1.16b, v0.16b, v0.16b, #8
; CHECK-i64-NEXT:    frintx v0.4h, v0.4h
; CHECK-i64-NEXT:    frintx v1.4h, v1.4h
; CHECK-i64-NEXT:    mov h4, v0.h[2]
; CHECK-i64-NEXT:    mov h2, v0.h[1]
; CHECK-i64-NEXT:    mov h7, v0.h[3]
; CHECK-i64-NEXT:    fcvtzs x8, h0
; CHECK-i64-NEXT:    mov h3, v1.h[2]
; CHECK-i64-NEXT:    mov h5, v1.h[3]
; CHECK-i64-NEXT:    mov h6, v1.h[1]
; CHECK-i64-NEXT:    fcvtzs x11, h1
; CHECK-i64-NEXT:    fcvtzs x12, h4
; CHECK-i64-NEXT:    fcvtzs x9, h2
; CHECK-i64-NEXT:    fcvtzs x15, h7
; CHECK-i64-NEXT:    fmov d0, x8
; CHECK-i64-NEXT:    fcvtzs x10, h3
; CHECK-i64-NEXT:    fcvtzs x13, h5
; CHECK-i64-NEXT:    fcvtzs x14, h6
; CHECK-i64-NEXT:    fmov d1, x12
; CHECK-i64-NEXT:    fmov d2, x11
; CHECK-i64-NEXT:    mov v0.d[1], x9
; CHECK-i64-NEXT:    fmov d3, x10
; CHECK-i64-NEXT:    mov v1.d[1], x15
; CHECK-i64-NEXT:    mov v2.d[1], x14
; CHECK-i64-NEXT:    mov v3.d[1], x13
; CHECK-i64-NEXT:    ret
  %a = call <8 x iXLen> @llvm.lrint.v8iXLen.v8f16(<8 x half> %x)
  ret <8 x iXLen> %a
}
declare <8 x iXLen> @llvm.lrint.v8iXLen.v8f16(<8 x half>)

define <16 x iXLen> @lrint_v16iXLen_v16f16(<16 x half> %x) {
  %a = call <16 x iXLen> @llvm.lrint.v16iXLen.v16f16(<16 x half> %x)
  ret <16 x iXLen> %a
}
declare <16 x iXLen> @llvm.lrint.v16iXLen.v16f16(<16 x half>)

define <32 x iXLen> @lrint_v32iXLen_v32f16(<32 x half> %x) {
  %a = call <32 x iXLen> @llvm.lrint.v32iXLen.v32f16(<32 x half> %x)
  ret <32 x iXLen> %a
}
declare <32 x iXLen> @llvm.lrint.v32iXLen.v32f16(<32 x half>)

define <1 x iXLen> @lrint_v1f32(<1 x float> %x) {
; CHECK-i32-LABEL: lrint_v1f32:
; CHECK-i32:       // %bb.0:
; CHECK-i32-NEXT:    frintx v0.2s, v0.2s
; CHECK-i32-NEXT:    fcvtzs v0.2s, v0.2s
; CHECK-i32-NEXT:    ret
;
; CHECK-i64-LABEL: lrint_v1f32:
; CHECK-i64:       // %bb.0:
; CHECK-i64-NEXT:    // kill: def $d0 killed $d0 def $q0
; CHECK-i64-NEXT:    frintx s0, s0
; CHECK-i64-NEXT:    fcvtzs x8, s0
; CHECK-i64-NEXT:    fmov d0, x8
; CHECK-i64-NEXT:    ret
  %a = call <1 x iXLen> @llvm.lrint.v1iXLen.v1f32(<1 x float> %x)
  ret <1 x iXLen> %a
}
declare <1 x iXLen> @llvm.lrint.v1iXLen.v1f32(<1 x float>)

define <2 x iXLen> @lrint_v2f32(<2 x float> %x) {
; CHECK-i32-LABEL: lrint_v2f32:
; CHECK-i32:       // %bb.0:
; CHECK-i32-NEXT:    frintx v0.2s, v0.2s
; CHECK-i32-NEXT:    fcvtzs v0.2s, v0.2s
; CHECK-i32-NEXT:    ret
;
; CHECK-i64-LABEL: lrint_v2f32:
; CHECK-i64:       // %bb.0:
; CHECK-i64-NEXT:    frintx v0.2s, v0.2s
; CHECK-i64-NEXT:    mov s1, v0.s[1]
; CHECK-i64-NEXT:    fcvtzs x8, s0
; CHECK-i64-NEXT:    fcvtzs x9, s1
; CHECK-i64-NEXT:    fmov d0, x8
; CHECK-i64-NEXT:    mov v0.d[1], x9
; CHECK-i64-NEXT:    ret
  %a = call <2 x iXLen> @llvm.lrint.v2iXLen.v2f32(<2 x float> %x)
  ret <2 x iXLen> %a
}
declare <2 x iXLen> @llvm.lrint.v2iXLen.v2f32(<2 x float>)

define <4 x iXLen> @lrint_v4f32(<4 x float> %x) {
; CHECK-i32-LABEL: lrint_v4f32:
; CHECK-i32:       // %bb.0:
; CHECK-i32-NEXT:    frintx v0.4s, v0.4s
; CHECK-i32-NEXT:    fcvtzs v0.4s, v0.4s
; CHECK-i32-NEXT:    ret
;
; CHECK-i64-LABEL: lrint_v4f32:
; CHECK-i64:       // %bb.0:
; CHECK-i64-NEXT:    frintx v0.4s, v0.4s
; CHECK-i64-NEXT:    mov s1, v0.s[2]
; CHECK-i64-NEXT:    mov s2, v0.s[3]
; CHECK-i64-NEXT:    mov s3, v0.s[1]
; CHECK-i64-NEXT:    fcvtzs x9, s0
; CHECK-i64-NEXT:    fcvtzs x8, s1
; CHECK-i64-NEXT:    fcvtzs x10, s2
; CHECK-i64-NEXT:    fcvtzs x11, s3
; CHECK-i64-NEXT:    fmov d0, x9
; CHECK-i64-NEXT:    fmov d1, x8
; CHECK-i64-NEXT:    mov v0.d[1], x11
; CHECK-i64-NEXT:    mov v1.d[1], x10
; CHECK-i64-NEXT:    ret
  %a = call <4 x iXLen> @llvm.lrint.v4iXLen.v4f32(<4 x float> %x)
  ret <4 x iXLen> %a
}
declare <4 x iXLen> @llvm.lrint.v4iXLen.v4f32(<4 x float>)

define <8 x iXLen> @lrint_v8f32(<8 x float> %x) {
; CHECK-i32-LABEL: lrint_v8f32:
; CHECK-i32:       // %bb.0:
; CHECK-i32-NEXT:    ptrue p0.d, vl2
; CHECK-i32-NEXT:    // kill: def $q0 killed $q0 def $z0
; CHECK-i32-NEXT:    // kill: def $q1 killed $q1 def $z1
; CHECK-i32-NEXT:    splice z0.d, p0, z0.d, z1.d
; CHECK-i32-NEXT:    ptrue p0.s, vl8
; CHECK-i32-NEXT:    movprfx z2, z0
; CHECK-i32-NEXT:    frintx z2.s, p0/m, z0.s
; CHECK-i32-NEXT:    mov z0.s, z2.s[4]
; CHECK-i32-NEXT:    mov z1.s, z2.s[5]
; CHECK-i32-NEXT:    mov z3.s, z2.s[1]
; CHECK-i32-NEXT:    fcvtzs w9, s2
; CHECK-i32-NEXT:    fcvtzs w8, s0
; CHECK-i32-NEXT:    mov z0.s, z2.s[6]
; CHECK-i32-NEXT:    fcvtzs w10, s1
; CHECK-i32-NEXT:    mov z1.s, z2.s[2]
; CHECK-i32-NEXT:    fcvtzs w11, s3
; CHECK-i32-NEXT:    mov z3.s, z2.s[7]
; CHECK-i32-NEXT:    mov z2.s, z2.s[3]
; CHECK-i32-NEXT:    fcvtzs w12, s0
; CHECK-i32-NEXT:    fmov s0, w9
; CHECK-i32-NEXT:    fcvtzs w13, s1
; CHECK-i32-NEXT:    fmov s1, w8
; CHECK-i32-NEXT:    fcvtzs w8, s3
; CHECK-i32-NEXT:    fcvtzs w9, s2
; CHECK-i32-NEXT:    mov v0.s[1], w11
; CHECK-i32-NEXT:    mov v1.s[1], w10
; CHECK-i32-NEXT:    mov v0.s[2], w13
; CHECK-i32-NEXT:    mov v1.s[2], w12
; CHECK-i32-NEXT:    mov v0.s[3], w9
; CHECK-i32-NEXT:    mov v1.s[3], w8
; CHECK-i32-NEXT:    ret
;
; CHECK-i64-LABEL: lrint_v8f32:
; CHECK-i64:       // %bb.0:
; CHECK-i64-NEXT:    frintx v0.4s, v0.4s
; CHECK-i64-NEXT:    frintx v1.4s, v1.4s
; CHECK-i64-NEXT:    mov s3, v1.s[2]
; CHECK-i64-NEXT:    mov s4, v0.s[2]
; CHECK-i64-NEXT:    mov s2, v0.s[1]
; CHECK-i64-NEXT:    mov s5, v1.s[3]
; CHECK-i64-NEXT:    mov s6, v1.s[1]
; CHECK-i64-NEXT:    mov s7, v0.s[3]
; CHECK-i64-NEXT:    fcvtzs x8, s0
; CHECK-i64-NEXT:    fcvtzs x10, s1
; CHECK-i64-NEXT:    fcvtzs x11, s3
; CHECK-i64-NEXT:    fcvtzs x12, s4
; CHECK-i64-NEXT:    fcvtzs x9, s2
; CHECK-i64-NEXT:    fcvtzs x13, s5
; CHECK-i64-NEXT:    fcvtzs x14, s6
; CHECK-i64-NEXT:    fcvtzs x15, s7
; CHECK-i64-NEXT:    fmov d0, x8
; CHECK-i64-NEXT:    fmov d2, x10
; CHECK-i64-NEXT:    fmov d1, x12
; CHECK-i64-NEXT:    fmov d3, x11
; CHECK-i64-NEXT:    mov v0.d[1], x9
; CHECK-i64-NEXT:    mov v2.d[1], x14
; CHECK-i64-NEXT:    mov v1.d[1], x15
; CHECK-i64-NEXT:    mov v3.d[1], x13
; CHECK-i64-NEXT:    ret
  %a = call <8 x iXLen> @llvm.lrint.v8iXLen.v8f32(<8 x float> %x)
  ret <8 x iXLen> %a
}
declare <8 x iXLen> @llvm.lrint.v8iXLen.v8f32(<8 x float>)

define <16 x iXLen> @lrint_v16iXLen_v16f32(<16 x float> %x) {
  %a = call <16 x iXLen> @llvm.lrint.v16iXLen.v16f32(<16 x float> %x)
  ret <16 x iXLen> %a
}
declare <16 x iXLen> @llvm.lrint.v16iXLen.v16f32(<16 x float>)

define <32 x iXLen> @lrint_v32iXLen_v32f32(<32 x float> %x) {
  %a = call <32 x iXLen> @llvm.lrint.v32iXLen.v32f32(<32 x float> %x)
  ret <32 x iXLen> %a
}
declare <32 x iXLen> @llvm.lrint.v32iXLen.v32f32(<32 x float>)

define <1 x iXLen> @lrint_v1f64(<1 x double> %x) {
; CHECK-i32-LABEL: lrint_v1f64:
; CHECK-i32:       // %bb.0:
; CHECK-i32-NEXT:    frintx d0, d0
; CHECK-i32-NEXT:    fcvtzs w8, d0
; CHECK-i32-NEXT:    fmov s0, w8
; CHECK-i32-NEXT:    ret
;
; CHECK-i64-LABEL: lrint_v1f64:
; CHECK-i64:       // %bb.0:
; CHECK-i64-NEXT:    frintx d0, d0
; CHECK-i64-NEXT:    fcvtzs x8, d0
; CHECK-i64-NEXT:    fmov d0, x8
; CHECK-i64-NEXT:    ret
  %a = call <1 x iXLen> @llvm.lrint.v1iXLen.v1f64(<1 x double> %x)
  ret <1 x iXLen> %a
}
declare <1 x iXLen> @llvm.lrint.v1iXLen.v1f64(<1 x double>)

define <2 x iXLen> @lrint_v2f64(<2 x double> %x) {
; CHECK-i32-LABEL: lrint_v2f64:
; CHECK-i32:       // %bb.0:
; CHECK-i32-NEXT:    frintx v0.2d, v0.2d
; CHECK-i32-NEXT:    mov d1, v0.d[1]
; CHECK-i32-NEXT:    fcvtzs w8, d0
; CHECK-i32-NEXT:    fcvtzs w9, d1
; CHECK-i32-NEXT:    fmov s0, w8
; CHECK-i32-NEXT:    mov v0.s[1], w9
; CHECK-i32-NEXT:    // kill: def $d0 killed $d0 killed $q0
; CHECK-i32-NEXT:    ret
;
; CHECK-i64-LABEL: lrint_v2f64:
; CHECK-i64:       // %bb.0:
; CHECK-i64-NEXT:    frintx v0.2d, v0.2d
; CHECK-i64-NEXT:    fcvtzs v0.2d, v0.2d
; CHECK-i64-NEXT:    ret
  %a = call <2 x iXLen> @llvm.lrint.v2iXLen.v2f64(<2 x double> %x)
  ret <2 x iXLen> %a
}
declare <2 x iXLen> @llvm.lrint.v2iXLen.v2f64(<2 x double>)

define <4 x iXLen> @lrint_v4f64(<4 x double> %x) {
; CHECK-i32-LABEL: lrint_v4f64:
; CHECK-i32:       // %bb.0:
; CHECK-i32-NEXT:    ptrue p0.d, vl2
; CHECK-i32-NEXT:    // kill: def $q0 killed $q0 def $z0
; CHECK-i32-NEXT:    // kill: def $q1 killed $q1 def $z1
; CHECK-i32-NEXT:    splice z0.d, p0, z0.d, z1.d
; CHECK-i32-NEXT:    ptrue p0.d, vl4
; CHECK-i32-NEXT:    movprfx z1, z0
; CHECK-i32-NEXT:    frintx z1.d, p0/m, z0.d
; CHECK-i32-NEXT:    mov z0.d, z1.d[1]
; CHECK-i32-NEXT:    fcvtzs w8, d1
; CHECK-i32-NEXT:    mov z2.d, z1.d[2]
; CHECK-i32-NEXT:    mov z1.d, z1.d[3]
; CHECK-i32-NEXT:    fcvtzs w9, d0
; CHECK-i32-NEXT:    fmov s0, w8
; CHECK-i32-NEXT:    fcvtzs w8, d2
; CHECK-i32-NEXT:    mov v0.s[1], w9
; CHECK-i32-NEXT:    mov v0.s[2], w8
; CHECK-i32-NEXT:    fcvtzs w8, d1
; CHECK-i32-NEXT:    mov v0.s[3], w8
; CHECK-i32-NEXT:    ret
;
; CHECK-i64-LABEL: lrint_v4f64:
; CHECK-i64:       // %bb.0:
; CHECK-i64-NEXT:    ptrue p0.d, vl2
; CHECK-i64-NEXT:    // kill: def $q0 killed $q0 def $z0
; CHECK-i64-NEXT:    // kill: def $q1 killed $q1 def $z1
; CHECK-i64-NEXT:    splice z0.d, p0, z0.d, z1.d
; CHECK-i64-NEXT:    ptrue p0.d, vl4
; CHECK-i64-NEXT:    frintx z0.d, p0/m, z0.d
; CHECK-i64-NEXT:    mov z1.d, z0.d[2]
; CHECK-i64-NEXT:    mov z2.d, z0.d[3]
; CHECK-i64-NEXT:    mov z3.d, z0.d[1]
; CHECK-i64-NEXT:    fcvtzs x9, d0
; CHECK-i64-NEXT:    fcvtzs x8, d1
; CHECK-i64-NEXT:    fcvtzs x10, d2
; CHECK-i64-NEXT:    fcvtzs x11, d3
; CHECK-i64-NEXT:    fmov d0, x9
; CHECK-i64-NEXT:    fmov d1, x8
; CHECK-i64-NEXT:    mov v0.d[1], x11
; CHECK-i64-NEXT:    mov v1.d[1], x10
; CHECK-i64-NEXT:    ret
  %a = call <4 x iXLen> @llvm.lrint.v4iXLen.v4f64(<4 x double> %x)
  ret <4 x iXLen> %a
}
declare <4 x iXLen> @llvm.lrint.v4iXLen.v4f64(<4 x double>)

define <8 x iXLen> @lrint_v8f64(<8 x double> %x) {
; CHECK-i32-LABEL: lrint_v8f64:
; CHECK-i32:       // %bb.0:
; CHECK-i32-NEXT:    ptrue p0.d, vl2
; CHECK-i32-NEXT:    // kill: def $q2 killed $q2 def $z2
; CHECK-i32-NEXT:    // kill: def $q0 killed $q0 def $z0
; CHECK-i32-NEXT:    // kill: def $q3 killed $q3 def $z3
; CHECK-i32-NEXT:    // kill: def $q1 killed $q1 def $z1
; CHECK-i32-NEXT:    splice z0.d, p0, z0.d, z1.d
; CHECK-i32-NEXT:    splice z2.d, p0, z2.d, z3.d
; CHECK-i32-NEXT:    ptrue p0.d, vl4
; CHECK-i32-NEXT:    movprfx z3, z0
; CHECK-i32-NEXT:    frintx z3.d, p0/m, z0.d
; CHECK-i32-NEXT:    frintx z2.d, p0/m, z2.d
; CHECK-i32-NEXT:    mov z0.d, z3.d[1]
; CHECK-i32-NEXT:    mov z1.d, z2.d[1]
; CHECK-i32-NEXT:    fcvtzs w8, d3
; CHECK-i32-NEXT:    fcvtzs w9, d2
; CHECK-i32-NEXT:    mov z4.d, z3.d[2]
; CHECK-i32-NEXT:    mov z5.d, z2.d[2]
; CHECK-i32-NEXT:    mov z3.d, z3.d[3]
; CHECK-i32-NEXT:    mov z2.d, z2.d[3]
; CHECK-i32-NEXT:    fcvtzs w10, d0
; CHECK-i32-NEXT:    fcvtzs w11, d1
; CHECK-i32-NEXT:    fmov s0, w8
; CHECK-i32-NEXT:    fcvtzs w8, d4
; CHECK-i32-NEXT:    fmov s1, w9
; CHECK-i32-NEXT:    fcvtzs w9, d5
; CHECK-i32-NEXT:    mov v0.s[1], w10
; CHECK-i32-NEXT:    mov v1.s[1], w11
; CHECK-i32-NEXT:    mov v0.s[2], w8
; CHECK-i32-NEXT:    fcvtzs w8, d3
; CHECK-i32-NEXT:    mov v1.s[2], w9
; CHECK-i32-NEXT:    fcvtzs w9, d2
; CHECK-i32-NEXT:    mov v0.s[3], w8
; CHECK-i32-NEXT:    mov v1.s[3], w9
; CHECK-i32-NEXT:    ret
;
; CHECK-i64-LABEL: lrint_v8f64:
; CHECK-i64:       // %bb.0:
; CHECK-i64-NEXT:    ptrue p0.d, vl2
; CHECK-i64-NEXT:    // kill: def $q2 killed $q2 def $z2
; CHECK-i64-NEXT:    // kill: def $q0 killed $q0 def $z0
; CHECK-i64-NEXT:    // kill: def $q3 killed $q3 def $z3
; CHECK-i64-NEXT:    // kill: def $q1 killed $q1 def $z1
; CHECK-i64-NEXT:    splice z0.d, p0, z0.d, z1.d
; CHECK-i64-NEXT:    splice z2.d, p0, z2.d, z3.d
; CHECK-i64-NEXT:    ptrue p0.d, vl4
; CHECK-i64-NEXT:    frintx z0.d, p0/m, z0.d
; CHECK-i64-NEXT:    movprfx z1, z2
; CHECK-i64-NEXT:    frintx z1.d, p0/m, z2.d
; CHECK-i64-NEXT:    mov z4.d, z1.d[2]
; CHECK-i64-NEXT:    mov z5.d, z0.d[2]
; CHECK-i64-NEXT:    mov z2.d, z0.d[1]
; CHECK-i64-NEXT:    mov z3.d, z1.d[3]
; CHECK-i64-NEXT:    mov z6.d, z0.d[3]
; CHECK-i64-NEXT:    fcvtzs x8, d0
; CHECK-i64-NEXT:    mov z0.d, z1.d[1]
; CHECK-i64-NEXT:    fcvtzs x10, d1
; CHECK-i64-NEXT:    fcvtzs x11, d4
; CHECK-i64-NEXT:    fcvtzs x12, d5
; CHECK-i64-NEXT:    fcvtzs x9, d2
; CHECK-i64-NEXT:    fcvtzs x13, d3
; CHECK-i64-NEXT:    fcvtzs x14, d6
; CHECK-i64-NEXT:    fcvtzs x15, d0
; CHECK-i64-NEXT:    fmov d0, x8
; CHECK-i64-NEXT:    fmov d2, x10
; CHECK-i64-NEXT:    fmov d1, x12
; CHECK-i64-NEXT:    fmov d3, x11
; CHECK-i64-NEXT:    mov v0.d[1], x9
; CHECK-i64-NEXT:    mov v2.d[1], x15
; CHECK-i64-NEXT:    mov v1.d[1], x14
; CHECK-i64-NEXT:    mov v3.d[1], x13
; CHECK-i64-NEXT:    ret
  %a = call <8 x iXLen> @llvm.lrint.v8iXLen.v8f64(<8 x double> %x)
  ret <8 x iXLen> %a
}
declare <8 x iXLen> @llvm.lrint.v8iXLen.v8f64(<8 x double>)

define <16 x iXLen> @lrint_v16f64(<16 x double> %x) {
; CHECK-i32-LABEL: lrint_v16f64:
; CHECK-i32:       // %bb.0:
; CHECK-i32-NEXT:    ptrue p1.d, vl2
; CHECK-i32-NEXT:    // kill: def $q0 killed $q0 def $z0
; CHECK-i32-NEXT:    // kill: def $q6 killed $q6 def $z6
; CHECK-i32-NEXT:    // kill: def $q4 killed $q4 def $z4
; CHECK-i32-NEXT:    // kill: def $q2 killed $q2 def $z2
; CHECK-i32-NEXT:    // kill: def $q1 killed $q1 def $z1
; CHECK-i32-NEXT:    // kill: def $q7 killed $q7 def $z7
; CHECK-i32-NEXT:    // kill: def $q5 killed $q5 def $z5
; CHECK-i32-NEXT:    // kill: def $q3 killed $q3 def $z3
; CHECK-i32-NEXT:    ptrue p0.d, vl4
; CHECK-i32-NEXT:    splice z0.d, p1, z0.d, z1.d
; CHECK-i32-NEXT:    splice z2.d, p1, z2.d, z3.d
; CHECK-i32-NEXT:    splice z4.d, p1, z4.d, z5.d
; CHECK-i32-NEXT:    splice z6.d, p1, z6.d, z7.d
; CHECK-i32-NEXT:    movprfx z5, z0
; CHECK-i32-NEXT:    frintx z5.d, p0/m, z0.d
; CHECK-i32-NEXT:    movprfx z7, z2
; CHECK-i32-NEXT:    frintx z7.d, p0/m, z2.d
; CHECK-i32-NEXT:    frintx z4.d, p0/m, z4.d
; CHECK-i32-NEXT:    frintx z6.d, p0/m, z6.d
; CHECK-i32-NEXT:    fcvtzs w8, d5
; CHECK-i32-NEXT:    mov z0.d, z5.d[1]
; CHECK-i32-NEXT:    mov z1.d, z7.d[1]
; CHECK-i32-NEXT:    fcvtzs w9, d7
; CHECK-i32-NEXT:    mov z3.d, z4.d[1]
; CHECK-i32-NEXT:    fcvtzs w10, d4
; CHECK-i32-NEXT:    mov z16.d, z6.d[1]
; CHECK-i32-NEXT:    fcvtzs w12, d6
; CHECK-i32-NEXT:    mov z2.d, z5.d[2]
; CHECK-i32-NEXT:    fcvtzs w11, d0
; CHECK-i32-NEXT:    fcvtzs w13, d1
; CHECK-i32-NEXT:    mov z17.d, z7.d[2]
; CHECK-i32-NEXT:    fcvtzs w14, d3
; CHECK-i32-NEXT:    fmov s0, w8
; CHECK-i32-NEXT:    mov z18.d, z4.d[2]
; CHECK-i32-NEXT:    fcvtzs w8, d16
; CHECK-i32-NEXT:    mov z19.d, z6.d[2]
; CHECK-i32-NEXT:    fcvtzs w15, d2
; CHECK-i32-NEXT:    fmov s1, w9
; CHECK-i32-NEXT:    fmov s2, w10
; CHECK-i32-NEXT:    fmov s3, w12
; CHECK-i32-NEXT:    fcvtzs w9, d17
; CHECK-i32-NEXT:    fcvtzs w10, d18
; CHECK-i32-NEXT:    mov v0.s[1], w11
; CHECK-i32-NEXT:    fcvtzs w11, d19
; CHECK-i32-NEXT:    mov z5.d, z5.d[3]
; CHECK-i32-NEXT:    mov z7.d, z7.d[3]
; CHECK-i32-NEXT:    mov v1.s[1], w13
; CHECK-i32-NEXT:    mov v2.s[1], w14
; CHECK-i32-NEXT:    mov v3.s[1], w8
; CHECK-i32-NEXT:    mov z4.d, z4.d[3]
; CHECK-i32-NEXT:    mov z6.d, z6.d[3]
; CHECK-i32-NEXT:    mov v0.s[2], w15
; CHECK-i32-NEXT:    fcvtzs w8, d5
; CHECK-i32-NEXT:    mov v1.s[2], w9
; CHECK-i32-NEXT:    fcvtzs w9, d7
; CHECK-i32-NEXT:    mov v2.s[2], w10
; CHECK-i32-NEXT:    fcvtzs w10, d4
; CHECK-i32-NEXT:    mov v3.s[2], w11
; CHECK-i32-NEXT:    fcvtzs w11, d6
; CHECK-i32-NEXT:    mov v0.s[3], w8
; CHECK-i32-NEXT:    mov v1.s[3], w9
; CHECK-i32-NEXT:    mov v2.s[3], w10
; CHECK-i32-NEXT:    mov v3.s[3], w11
; CHECK-i32-NEXT:    ret
;
; CHECK-i64-LABEL: lrint_v16f64:
; CHECK-i64:       // %bb.0:
; CHECK-i64-NEXT:    ptrue p1.d, vl2
; CHECK-i64-NEXT:    // kill: def $q6 killed $q6 def $z6
; CHECK-i64-NEXT:    // kill: def $q4 killed $q4 def $z4
; CHECK-i64-NEXT:    // kill: def $q7 killed $q7 def $z7
; CHECK-i64-NEXT:    // kill: def $q5 killed $q5 def $z5
; CHECK-i64-NEXT:    // kill: def $q2 killed $q2 def $z2
; CHECK-i64-NEXT:    // kill: def $q0 killed $q0 def $z0
; CHECK-i64-NEXT:    // kill: def $q3 killed $q3 def $z3
; CHECK-i64-NEXT:    // kill: def $q1 killed $q1 def $z1
; CHECK-i64-NEXT:    ptrue p0.d, vl4
; CHECK-i64-NEXT:    splice z6.d, p1, z6.d, z7.d
; CHECK-i64-NEXT:    splice z4.d, p1, z4.d, z5.d
; CHECK-i64-NEXT:    splice z2.d, p1, z2.d, z3.d
; CHECK-i64-NEXT:    splice z0.d, p1, z0.d, z1.d
; CHECK-i64-NEXT:    movprfx z3, z6
; CHECK-i64-NEXT:    frintx z3.d, p0/m, z6.d
; CHECK-i64-NEXT:    movprfx z1, z4
; CHECK-i64-NEXT:    frintx z1.d, p0/m, z4.d
; CHECK-i64-NEXT:    frintx z2.d, p0/m, z2.d
; CHECK-i64-NEXT:    frintx z0.d, p0/m, z0.d
; CHECK-i64-NEXT:    mov z4.d, z3.d[2]
; CHECK-i64-NEXT:    mov z5.d, z1.d[2]
; CHECK-i64-NEXT:    mov z6.d, z2.d[3]
; CHECK-i64-NEXT:    fcvtzs x11, d0
; CHECK-i64-NEXT:    fcvtzs x12, d1
; CHECK-i64-NEXT:    fcvtzs x13, d2
; CHECK-i64-NEXT:    fcvtzs x14, d3
; CHECK-i64-NEXT:    mov z7.d, z3.d[3]
; CHECK-i64-NEXT:    mov z16.d, z1.d[3]
; CHECK-i64-NEXT:    fcvtzs x9, d4
; CHECK-i64-NEXT:    fcvtzs x10, d5
; CHECK-i64-NEXT:    mov z4.d, z2.d[2]
; CHECK-i64-NEXT:    mov z5.d, z0.d[2]
; CHECK-i64-NEXT:    fcvtzs x8, d6
; CHECK-i64-NEXT:    mov z2.d, z2.d[1]
; CHECK-i64-NEXT:    mov z6.d, z0.d[3]
; CHECK-i64-NEXT:    mov z1.d, z1.d[1]
; CHECK-i64-NEXT:    mov z3.d, z3.d[1]
; CHECK-i64-NEXT:    fcvtzs x15, d4
; CHECK-i64-NEXT:    mov z4.d, z0.d[1]
; CHECK-i64-NEXT:    fmov d0, x11
; CHECK-i64-NEXT:    fcvtzs x16, d5
; CHECK-i64-NEXT:    fcvtzs x11, d2
; CHECK-i64-NEXT:    fmov d2, x13
; CHECK-i64-NEXT:    fcvtzs x17, d7
; CHECK-i64-NEXT:    fcvtzs x18, d16
; CHECK-i64-NEXT:    fcvtzs x0, d3
; CHECK-i64-NEXT:    fcvtzs x13, d4
; CHECK-i64-NEXT:    fmov d4, x12
; CHECK-i64-NEXT:    fcvtzs x12, d6
; CHECK-i64-NEXT:    fmov d6, x14
; CHECK-i64-NEXT:    fcvtzs x14, d1
; CHECK-i64-NEXT:    fmov d3, x15
; CHECK-i64-NEXT:    fmov d1, x16
; CHECK-i64-NEXT:    fmov d5, x10
; CHECK-i64-NEXT:    fmov d7, x9
; CHECK-i64-NEXT:    mov v2.d[1], x11
; CHECK-i64-NEXT:    mov v0.d[1], x13
; CHECK-i64-NEXT:    mov v3.d[1], x8
; CHECK-i64-NEXT:    mov v6.d[1], x0
; CHECK-i64-NEXT:    mov v4.d[1], x14
; CHECK-i64-NEXT:    mov v1.d[1], x12
; CHECK-i64-NEXT:    mov v5.d[1], x18
; CHECK-i64-NEXT:    mov v7.d[1], x17
; CHECK-i64-NEXT:    ret
  %a = call <16 x iXLen> @llvm.lrint.v16iXLen.v16f64(<16 x double> %x)
  ret <16 x iXLen> %a
}
declare <16 x iXLen> @llvm.lrint.v16iXLen.v16f64(<16 x double>)

define <32 x iXLen> @lrint_v32f64(<32 x double> %x) {
; CHECK-i32-LABEL: lrint_v32f64:
; CHECK-i32:       // %bb.0:
; CHECK-i32-NEXT:    ptrue p1.d, vl2
; CHECK-i32-NEXT:    // kill: def $q0 killed $q0 def $z0
; CHECK-i32-NEXT:    // kill: def $q1 killed $q1 def $z1
; CHECK-i32-NEXT:    // kill: def $q3 killed $q3 def $z3
; CHECK-i32-NEXT:    // kill: def $q2 killed $q2 def $z2
; CHECK-i32-NEXT:    // kill: def $q4 killed $q4 def $z4
; CHECK-i32-NEXT:    // kill: def $q5 killed $q5 def $z5
; CHECK-i32-NEXT:    // kill: def $q7 killed $q7 def $z7
; CHECK-i32-NEXT:    // kill: def $q6 killed $q6 def $z6
; CHECK-i32-NEXT:    ptrue p0.d, vl4
; CHECK-i32-NEXT:    splice z0.d, p1, z0.d, z1.d
; CHECK-i32-NEXT:    splice z2.d, p1, z2.d, z3.d
; CHECK-i32-NEXT:    splice z4.d, p1, z4.d, z5.d
; CHECK-i32-NEXT:    ldp q1, q3, [sp]
; CHECK-i32-NEXT:    splice z6.d, p1, z6.d, z7.d
; CHECK-i32-NEXT:    frintx z0.d, p0/m, z0.d
; CHECK-i32-NEXT:    splice z1.d, p1, z1.d, z3.d
; CHECK-i32-NEXT:    movprfx z18, z2
; CHECK-i32-NEXT:    frintx z18.d, p0/m, z2.d
; CHECK-i32-NEXT:    ldp q5, q3, [sp, #96]
; CHECK-i32-NEXT:    ldp q2, q7, [sp, #64]
; CHECK-i32-NEXT:    splice z5.d, p1, z5.d, z3.d
; CHECK-i32-NEXT:    movprfx z3, z4
; CHECK-i32-NEXT:    frintx z3.d, p0/m, z4.d
; CHECK-i32-NEXT:    mov z4.d, z0.d[1]
; CHECK-i32-NEXT:    fcvtzs w8, d0
; CHECK-i32-NEXT:    splice z2.d, p1, z2.d, z7.d
; CHECK-i32-NEXT:    mov z19.d, z18.d[1]
; CHECK-i32-NEXT:    ldp q7, q16, [sp, #32]
; CHECK-i32-NEXT:    movprfx z17, z1
; CHECK-i32-NEXT:    frintx z17.d, p0/m, z1.d
; CHECK-i32-NEXT:    fcvtzs w10, d4
; CHECK-i32-NEXT:    mov z1.d, z0.d[2]
; CHECK-i32-NEXT:    fcvtzs w9, d18
; CHECK-i32-NEXT:    mov z4.d, z0.d[3]
; CHECK-i32-NEXT:    fcvtzs w11, d19
; CHECK-i32-NEXT:    mov z20.d, z18.d[3]
; CHECK-i32-NEXT:    fmov s0, w8
; CHECK-i32-NEXT:    splice z7.d, p1, z7.d, z16.d
; CHECK-i32-NEXT:    movprfx z16, z6
; CHECK-i32-NEXT:    frintx z16.d, p0/m, z6.d
; CHECK-i32-NEXT:    mov z6.d, z18.d[2]
; CHECK-i32-NEXT:    mov z18.d, z3.d[1]
; CHECK-i32-NEXT:    fcvtzs w12, d3
; CHECK-i32-NEXT:    fcvtzs w13, d1
; CHECK-i32-NEXT:    fmov s1, w9
; CHECK-i32-NEXT:    movprfx z19, z2
; CHECK-i32-NEXT:    frintx z19.d, p0/m, z2.d
; CHECK-i32-NEXT:    mov v0.s[1], w10
; CHECK-i32-NEXT:    mov z21.d, z3.d[2]
; CHECK-i32-NEXT:    fcvtzs w8, d4
; CHECK-i32-NEXT:    fcvtzs w14, d6
; CHECK-i32-NEXT:    mov z6.d, z16.d[1]
; CHECK-i32-NEXT:    fcvtzs w15, d18
; CHECK-i32-NEXT:    movprfx z18, z7
; CHECK-i32-NEXT:    frintx z18.d, p0/m, z7.d
; CHECK-i32-NEXT:    mov v1.s[1], w11
; CHECK-i32-NEXT:    fmov s2, w12
; CHECK-i32-NEXT:    mov z7.d, z17.d[1]
; CHECK-i32-NEXT:    mov z4.d, z16.d[2]
; CHECK-i32-NEXT:    fcvtzs w16, d16
; CHECK-i32-NEXT:    mov v0.s[2], w13
; CHECK-i32-NEXT:    fcvtzs w13, d17
; CHECK-i32-NEXT:    fcvtzs w12, d6
; CHECK-i32-NEXT:    mov z6.d, z19.d[1]
; CHECK-i32-NEXT:    fcvtzs w11, d21
; CHECK-i32-NEXT:    movprfx z21, z5
; CHECK-i32-NEXT:    frintx z21.d, p0/m, z5.d
; CHECK-i32-NEXT:    mov z3.d, z3.d[3]
; CHECK-i32-NEXT:    mov v2.s[1], w15
; CHECK-i32-NEXT:    mov z5.d, z18.d[1]
; CHECK-i32-NEXT:    fcvtzs w15, d7
; CHECK-i32-NEXT:    fcvtzs w0, d19
; CHECK-i32-NEXT:    mov v1.s[2], w14
; CHECK-i32-NEXT:    fcvtzs w14, d4
; CHECK-i32-NEXT:    mov z7.d, z18.d[2]
; CHECK-i32-NEXT:    fmov s4, w13
; CHECK-i32-NEXT:    fcvtzs w13, d6
; CHECK-i32-NEXT:    mov z6.d, z19.d[2]
; CHECK-i32-NEXT:    fcvtzs w10, d3
; CHECK-i32-NEXT:    fmov s3, w16
; CHECK-i32-NEXT:    fcvtzs w17, d18
; CHECK-i32-NEXT:    fcvtzs w18, d5
; CHECK-i32-NEXT:    mov z5.d, z21.d[1]
; CHECK-i32-NEXT:    fcvtzs w2, d21
; CHECK-i32-NEXT:    fcvtzs w1, d7
; CHECK-i32-NEXT:    mov z7.d, z21.d[2]
; CHECK-i32-NEXT:    mov v4.s[1], w15
; CHECK-i32-NEXT:    fcvtzs w15, d6
; CHECK-i32-NEXT:    fmov s6, w0
; CHECK-i32-NEXT:    mov v3.s[1], w12
; CHECK-i32-NEXT:    fcvtzs w9, d20
; CHECK-i32-NEXT:    fcvtzs w12, d5
; CHECK-i32-NEXT:    mov z20.d, z17.d[2]
; CHECK-i32-NEXT:    fmov s5, w17
; CHECK-i32-NEXT:    mov z16.d, z16.d[3]
; CHECK-i32-NEXT:    mov z17.d, z17.d[3]
; CHECK-i32-NEXT:    mov z18.d, z18.d[3]
; CHECK-i32-NEXT:    mov v6.s[1], w13
; CHECK-i32-NEXT:    fcvtzs w13, d7
; CHECK-i32-NEXT:    fmov s7, w2
; CHECK-i32-NEXT:    fcvtzs w16, d20
; CHECK-i32-NEXT:    mov v5.s[1], w18
; CHECK-i32-NEXT:    mov z19.d, z19.d[3]
; CHECK-i32-NEXT:    mov z20.d, z21.d[3]
; CHECK-i32-NEXT:    mov v2.s[2], w11
; CHECK-i32-NEXT:    mov v3.s[2], w14
; CHECK-i32-NEXT:    mov v7.s[1], w12
; CHECK-i32-NEXT:    fcvtzs w11, d16
; CHECK-i32-NEXT:    fcvtzs w12, d17
; CHECK-i32-NEXT:    fcvtzs w14, d18
; CHECK-i32-NEXT:    mov v6.s[2], w15
; CHECK-i32-NEXT:    fcvtzs w15, d19
; CHECK-i32-NEXT:    mov v4.s[2], w16
; CHECK-i32-NEXT:    mov v5.s[2], w1
; CHECK-i32-NEXT:    mov v0.s[3], w8
; CHECK-i32-NEXT:    mov v1.s[3], w9
; CHECK-i32-NEXT:    mov v2.s[3], w10
; CHECK-i32-NEXT:    mov v7.s[2], w13
; CHECK-i32-NEXT:    fcvtzs w13, d20
; CHECK-i32-NEXT:    mov v3.s[3], w11
; CHECK-i32-NEXT:    mov v6.s[3], w15
; CHECK-i32-NEXT:    mov v4.s[3], w12
; CHECK-i32-NEXT:    mov v5.s[3], w14
; CHECK-i32-NEXT:    mov v7.s[3], w13
; CHECK-i32-NEXT:    ret
;
; CHECK-i64-LABEL: lrint_v32f64:
; CHECK-i64:       // %bb.0:
; CHECK-i64-NEXT:    stp x29, x30, [sp, #-16]! // 16-byte Folded Spill
; CHECK-i64-NEXT:    sub x9, sp, #272
; CHECK-i64-NEXT:    mov x29, sp
; CHECK-i64-NEXT:    and sp, x9, #0xffffffffffffffe0
; CHECK-i64-NEXT:    .cfi_def_cfa w29, 16
; CHECK-i64-NEXT:    .cfi_offset w30, -8
; CHECK-i64-NEXT:    .cfi_offset w29, -16
; CHECK-i64-NEXT:    ptrue p1.d, vl2
; CHECK-i64-NEXT:    // kill: def $q0 killed $q0 def $z0
; CHECK-i64-NEXT:    // kill: def $q1 killed $q1 def $z1
; CHECK-i64-NEXT:    // kill: def $q3 killed $q3 def $z3
; CHECK-i64-NEXT:    // kill: def $q2 killed $q2 def $z2
; CHECK-i64-NEXT:    // kill: def $q7 killed $q7 def $z7
; CHECK-i64-NEXT:    // kill: def $q6 killed $q6 def $z6
; CHECK-i64-NEXT:    // kill: def $q4 killed $q4 def $z4
; CHECK-i64-NEXT:    // kill: def $q5 killed $q5 def $z5
; CHECK-i64-NEXT:    ptrue p0.d, vl4
; CHECK-i64-NEXT:    splice z0.d, p1, z0.d, z1.d
; CHECK-i64-NEXT:    splice z2.d, p1, z2.d, z3.d
; CHECK-i64-NEXT:    splice z4.d, p1, z4.d, z5.d
; CHECK-i64-NEXT:    splice z6.d, p1, z6.d, z7.d
; CHECK-i64-NEXT:    ldp q5, q19, [x29, #16]
; CHECK-i64-NEXT:    movprfx z3, z0
; CHECK-i64-NEXT:    frintx z3.d, p0/m, z0.d
; CHECK-i64-NEXT:    movprfx z16, z2
; CHECK-i64-NEXT:    frintx z16.d, p0/m, z2.d
; CHECK-i64-NEXT:    frintx z4.d, p0/m, z4.d
; CHECK-i64-NEXT:    splice z5.d, p1, z5.d, z19.d
; CHECK-i64-NEXT:    frintx z6.d, p0/m, z6.d
; CHECK-i64-NEXT:    ldp q2, q17, [x29, #48]
; CHECK-i64-NEXT:    ldp q0, q1, [x29, #112]
; CHECK-i64-NEXT:    mov z18.d, z3.d[3]
; CHECK-i64-NEXT:    mov z7.d, z3.d[2]
; CHECK-i64-NEXT:    fcvtzs x9, d3
; CHECK-i64-NEXT:    mov z3.d, z3.d[1]
; CHECK-i64-NEXT:    mov z20.d, z16.d[3]
; CHECK-i64-NEXT:    fcvtzs x12, d16
; CHECK-i64-NEXT:    splice z2.d, p1, z2.d, z17.d
; CHECK-i64-NEXT:    frintx z5.d, p0/m, z5.d
; CHECK-i64-NEXT:    splice z0.d, p1, z0.d, z1.d
; CHECK-i64-NEXT:    fcvtzs x10, d18
; CHECK-i64-NEXT:    fcvtzs x11, d7
; CHECK-i64-NEXT:    mov z18.d, z16.d[2]
; CHECK-i64-NEXT:    mov z7.d, z16.d[1]
; CHECK-i64-NEXT:    fcvtzs x13, d3
; CHECK-i64-NEXT:    fcvtzs x14, d20
; CHECK-i64-NEXT:    str x9, [sp, #128]
; CHECK-i64-NEXT:    mov z16.d, z4.d[3]
; CHECK-i64-NEXT:    fcvtzs x9, d18
; CHECK-i64-NEXT:    mov z18.d, z4.d[2]
; CHECK-i64-NEXT:    frintx z2.d, p0/m, z2.d
; CHECK-i64-NEXT:    stp x11, x10, [sp, #144]
; CHECK-i64-NEXT:    fcvtzs x10, d7
; CHECK-i64-NEXT:    mov z7.d, z4.d[1]
; CHECK-i64-NEXT:    str x13, [sp, #136]
; CHECK-i64-NEXT:    fcvtzs x11, d16
; CHECK-i64-NEXT:    mov z16.d, z6.d[3]
; CHECK-i64-NEXT:    fcvtzs x13, d18
; CHECK-i64-NEXT:    ldp q3, q19, [x29, #80]
; CHECK-i64-NEXT:    stp x9, x14, [sp, #176]
; CHECK-i64-NEXT:    fcvtzs x9, d4
; CHECK-i64-NEXT:    mov z4.d, z6.d[2]
; CHECK-i64-NEXT:    stp x12, x10, [sp, #160]
; CHECK-i64-NEXT:    fcvtzs x10, d7
; CHECK-i64-NEXT:    mov z7.d, z6.d[1]
; CHECK-i64-NEXT:    fcvtzs x12, d6
; CHECK-i64-NEXT:    splice z3.d, p1, z3.d, z19.d
; CHECK-i64-NEXT:    mov z6.d, z5.d[2]
; CHECK-i64-NEXT:    stp x13, x11, [sp, #208]
; CHECK-i64-NEXT:    fcvtzs x11, d16
; CHECK-i64-NEXT:    fcvtzs x13, d4
; CHECK-i64-NEXT:    mov z4.d, z5.d[3]
; CHECK-i64-NEXT:    mov z1.d, z5.d[1]
; CHECK-i64-NEXT:    frintx z0.d, p0/m, z0.d
; CHECK-i64-NEXT:    stp x9, x10, [sp, #192]
; CHECK-i64-NEXT:    fcvtzs x9, d7
; CHECK-i64-NEXT:    frintx z3.d, p0/m, z3.d
; CHECK-i64-NEXT:    fcvtzs x10, d4
; CHECK-i64-NEXT:    stp x13, x11, [sp, #240]
; CHECK-i64-NEXT:    fcvtzs x11, d6
; CHECK-i64-NEXT:    mov z4.d, z2.d[3]
; CHECK-i64-NEXT:    fcvtzs x13, d2
; CHECK-i64-NEXT:    stp x12, x9, [sp, #224]
; CHECK-i64-NEXT:    fcvtzs x9, d5
; CHECK-i64-NEXT:    fcvtzs x12, d1
; CHECK-i64-NEXT:    mov z5.d, z2.d[2]
; CHECK-i64-NEXT:    mov z1.d, z2.d[1]
; CHECK-i64-NEXT:    mov z2.d, z3.d[2]
; CHECK-i64-NEXT:    stp x11, x10, [sp, #16]
; CHECK-i64-NEXT:    fcvtzs x10, d4
; CHECK-i64-NEXT:    mov z4.d, z3.d[3]
; CHECK-i64-NEXT:    fcvtzs x11, d5
; CHECK-i64-NEXT:    stp x9, x12, [sp]
; CHECK-i64-NEXT:    fcvtzs x9, d1
; CHECK-i64-NEXT:    mov z1.d, z3.d[1]
; CHECK-i64-NEXT:    fcvtzs x12, d4
; CHECK-i64-NEXT:    stp x11, x10, [sp, #48]
; CHECK-i64-NEXT:    fcvtzs x10, d2
; CHECK-i64-NEXT:    fcvtzs x11, d3
; CHECK-i64-NEXT:    stp x13, x9, [sp, #32]
; CHECK-i64-NEXT:    fcvtzs x9, d1
; CHECK-i64-NEXT:    mov z2.d, z0.d[3]
; CHECK-i64-NEXT:    mov z3.d, z0.d[2]
; CHECK-i64-NEXT:    mov z1.d, z0.d[1]
; CHECK-i64-NEXT:    fcvtzs x13, d2
; CHECK-i64-NEXT:    stp x10, x12, [sp, #80]
; CHECK-i64-NEXT:    fcvtzs x12, d0
; CHECK-i64-NEXT:    fcvtzs x10, d3
; CHECK-i64-NEXT:    stp x11, x9, [sp, #64]
; CHECK-i64-NEXT:    fcvtzs x9, d1
; CHECK-i64-NEXT:    stp x10, x13, [sp, #112]
; CHECK-i64-NEXT:    add x10, sp, #192
; CHECK-i64-NEXT:    stp x12, x9, [sp, #96]
; CHECK-i64-NEXT:    add x9, sp, #128
; CHECK-i64-NEXT:    ld1d { z0.d }, p0/z, [x9]
; CHECK-i64-NEXT:    add x9, sp, #160
; CHECK-i64-NEXT:    ld1d { z2.d }, p0/z, [x10]
; CHECK-i64-NEXT:    ld1d { z1.d }, p0/z, [x9]
; CHECK-i64-NEXT:    add x9, sp, #96
; CHECK-i64-NEXT:    add x10, sp, #224
; CHECK-i64-NEXT:    ld1d { z3.d }, p0/z, [x9]
; CHECK-i64-NEXT:    add x9, sp, #64
; CHECK-i64-NEXT:    ld1d { z4.d }, p0/z, [x10]
; CHECK-i64-NEXT:    add x10, sp, #32
; CHECK-i64-NEXT:    ld1d { z5.d }, p0/z, [x9]
; CHECK-i64-NEXT:    mov x9, sp
; CHECK-i64-NEXT:    ld1d { z6.d }, p0/z, [x10]
; CHECK-i64-NEXT:    mov x10, #28 // =0x1c
; CHECK-i64-NEXT:    ld1d { z7.d }, p0/z, [x9]
; CHECK-i64-NEXT:    mov x9, #24 // =0x18
; CHECK-i64-NEXT:    st1d { z3.d }, p0, [x8, x10, lsl #3]
; CHECK-i64-NEXT:    st1d { z5.d }, p0, [x8, x9, lsl #3]
; CHECK-i64-NEXT:    mov x9, #20 // =0x14
; CHECK-i64-NEXT:    st1d { z6.d }, p0, [x8, x9, lsl #3]
; CHECK-i64-NEXT:    mov x9, #16 // =0x10
; CHECK-i64-NEXT:    st1d { z7.d }, p0, [x8, x9, lsl #3]
; CHECK-i64-NEXT:    mov x9, #12 // =0xc
; CHECK-i64-NEXT:    st1d { z4.d }, p0, [x8, x9, lsl #3]
; CHECK-i64-NEXT:    mov x9, #8 // =0x8
; CHECK-i64-NEXT:    st1d { z2.d }, p0, [x8, x9, lsl #3]
; CHECK-i64-NEXT:    mov x9, #4 // =0x4
; CHECK-i64-NEXT:    st1d { z1.d }, p0, [x8, x9, lsl #3]
; CHECK-i64-NEXT:    st1d { z0.d }, p0, [x8]
; CHECK-i64-NEXT:    mov sp, x29
; CHECK-i64-NEXT:    ldp x29, x30, [sp], #16 // 16-byte Folded Reload
; CHECK-i64-NEXT:    ret
  %a = call <32 x iXLen> @llvm.lrint.v32iXLen.v16f64(<32 x double> %x)
  ret <32 x iXLen> %a
}
declare <32 x iXLen> @llvm.lrint.v32iXLen.v32f64(<32 x double>)
