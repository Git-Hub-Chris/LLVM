; NOTE: Assertions have been autogenerated by utils/update_llc_test_checks.py
; RUN: llc < %s -mtriple=aarch64 -mattr=+neon | FileCheck %s
; RUN: llc < %s -mtriple=aarch64 -mattr=+neon | FileCheck %s --check-prefixes=CHECK,CHECK-SD
; RUN: llc < %s -mtriple=aarch64 -mattr=+neon -global-isel -global-isel-abort=2 2>&1 |\
; RUN:   FileCheck %s --check-prefixes=CHECK,CHECK-GI

; CHECK-GI:       warning: Instruction selection used fallback path for lrint_v2f16
; CHECK-GI-NEXT:  warning: Instruction selection used fallback path for lrint_v4f16
; CHECK-GI-NEXT:  warning: Instruction selection used fallback path for lrint_v8f16
; CHECK-GI-NEXT:  warning: Instruction selection used fallback path for lrint_v16i64_v16f16
; CHECK-GI-NEXT:  warning: Instruction selection used fallback path for lrint_v32i64_v32f16
; CHECK-GI-NEXT:  warning: Instruction selection used fallback path for lrint_v2f32
; CHECK-GI-NEXT:  warning: Instruction selection used fallback path for lrint_v4f32
; CHECK-GI-NEXT:  warning: Instruction selection used fallback path for lrint_v8f32
; CHECK-GI-NEXT:  warning: Instruction selection used fallback path for lrint_v16i64_v16f32
; CHECK-GI-NEXT:  warning: Instruction selection used fallback path for lrint_v32i64_v32f32
; CHECK-GI-NEXT:  warning: Instruction selection used fallback path for lrint_v2f64
; CHECK-GI-NEXT:  warning: Instruction selection used fallback path for lrint_v4f64
; CHECK-GI-NEXT:  warning: Instruction selection used fallback path for lrint_v8f64
; CHECK-GI-NEXT:  warning: Instruction selection used fallback path for lrint_v16f64
; CHECK-GI-NEXT:  warning: Instruction selection used fallback path for lrint_v32f64

define <1 x i64> @lrint_v1f16(<1 x half> %x) {
; CHECK-LABEL: lrint_v1f16:
; CHECK:       // %bb.0:
; CHECK-NEXT:    fcvt s0, h0
; CHECK-NEXT:    frintx s0, s0
; CHECK-NEXT:    fcvtzs x8, s0
; CHECK-NEXT:    fmov d0, x8
; CHECK-NEXT:    ret
  %a = call <1 x i64> @llvm.lrint.v1i64.v1f16(<1 x half> %x)
  ret <1 x i64> %a
}
declare <1 x i64> @llvm.lrint.v1i64.v1f16(<1 x half>)

define <2 x i64> @lrint_v2f16(<2 x half> %x) {
; CHECK-LABEL: lrint_v2f16:
; CHECK:       // %bb.0:
; CHECK-NEXT:    fcvtl v0.4s, v0.4h
; CHECK-NEXT:    frintx v0.4s, v0.4s
; CHECK-NEXT:    fcvtn v0.4h, v0.4s
; CHECK-NEXT:    mov h1, v0.h[1]
; CHECK-NEXT:    fcvt s0, h0
; CHECK-NEXT:    fcvt s1, h1
; CHECK-NEXT:    fcvtzs x8, s0
; CHECK-NEXT:    fcvtzs x9, s1
; CHECK-NEXT:    fmov d0, x8
; CHECK-NEXT:    mov v0.d[1], x9
; CHECK-NEXT:    ret
  %a = call <2 x i64> @llvm.lrint.v2i64.v2f16(<2 x half> %x)
  ret <2 x i64> %a
}
declare <2 x i64> @llvm.lrint.v2i64.v2f16(<2 x half>)

define <4 x i64> @lrint_v4f16(<4 x half> %x) {
; CHECK-LABEL: lrint_v4f16:
; CHECK:       // %bb.0:
; CHECK-NEXT:    // kill: def $d0 killed $d0 def $q0
; CHECK-NEXT:    dup v1.2s, v0.s[1]
; CHECK-NEXT:    fcvtl v0.4s, v0.4h
; CHECK-NEXT:    fcvtl v1.4s, v1.4h
; CHECK-NEXT:    frintx v0.4s, v0.4s
; CHECK-NEXT:    frintx v1.4s, v1.4s
; CHECK-NEXT:    fcvtn v0.4h, v0.4s
; CHECK-NEXT:    fcvtn v1.4h, v1.4s
; CHECK-NEXT:    mov h2, v0.h[1]
; CHECK-NEXT:    fcvt s0, h0
; CHECK-NEXT:    mov h3, v1.h[1]
; CHECK-NEXT:    fcvt s1, h1
; CHECK-NEXT:    fcvt s2, h2
; CHECK-NEXT:    fcvtzs x8, s0
; CHECK-NEXT:    fcvt s3, h3
; CHECK-NEXT:    fcvtzs x9, s1
; CHECK-NEXT:    fcvtzs x10, s2
; CHECK-NEXT:    fmov d0, x8
; CHECK-NEXT:    fcvtzs x11, s3
; CHECK-NEXT:    fmov d1, x9
; CHECK-NEXT:    mov v0.d[1], x10
; CHECK-NEXT:    mov v1.d[1], x11
; CHECK-NEXT:    ret
  %a = call <4 x i64> @llvm.lrint.v4i64.v4f16(<4 x half> %x)
  ret <4 x i64> %a
}
declare <4 x i64> @llvm.lrint.v4i64.v4f16(<4 x half>)

define <8 x i64> @lrint_v8f16(<8 x half> %x) {
; CHECK-LABEL: lrint_v8f16:
; CHECK:       // %bb.0:
; CHECK-NEXT:    dup v1.2s, v0.s[1]
; CHECK-NEXT:    dup v2.2s, v0.s[3]
; CHECK-NEXT:    fcvtl v3.4s, v0.4h
; CHECK-NEXT:    fcvtl2 v0.4s, v0.8h
; CHECK-NEXT:    fcvtl v1.4s, v1.4h
; CHECK-NEXT:    fcvtl v2.4s, v2.4h
; CHECK-NEXT:    frintx v3.4s, v3.4s
; CHECK-NEXT:    frintx v0.4s, v0.4s
; CHECK-NEXT:    frintx v1.4s, v1.4s
; CHECK-NEXT:    frintx v2.4s, v2.4s
; CHECK-NEXT:    fcvtn v3.4h, v3.4s
; CHECK-NEXT:    fcvtn v0.4h, v0.4s
; CHECK-NEXT:    fcvtn v1.4h, v1.4s
; CHECK-NEXT:    fcvtn v2.4h, v2.4s
; CHECK-NEXT:    mov h4, v3.h[1]
; CHECK-NEXT:    mov h5, v0.h[1]
; CHECK-NEXT:    fcvt s0, h0
; CHECK-NEXT:    fcvt s3, h3
; CHECK-NEXT:    mov h6, v1.h[1]
; CHECK-NEXT:    mov h7, v2.h[1]
; CHECK-NEXT:    fcvt s1, h1
; CHECK-NEXT:    fcvt s2, h2
; CHECK-NEXT:    fcvt s4, h4
; CHECK-NEXT:    fcvt s5, h5
; CHECK-NEXT:    fcvtzs x8, s0
; CHECK-NEXT:    fcvtzs x9, s3
; CHECK-NEXT:    fcvt s6, h6
; CHECK-NEXT:    fcvt s7, h7
; CHECK-NEXT:    fcvtzs x11, s1
; CHECK-NEXT:    fcvtzs x12, s2
; CHECK-NEXT:    fcvtzs x10, s4
; CHECK-NEXT:    fcvtzs x13, s5
; CHECK-NEXT:    fmov d2, x8
; CHECK-NEXT:    fmov d0, x9
; CHECK-NEXT:    fcvtzs x14, s6
; CHECK-NEXT:    fcvtzs x15, s7
; CHECK-NEXT:    fmov d1, x11
; CHECK-NEXT:    fmov d3, x12
; CHECK-NEXT:    mov v0.d[1], x10
; CHECK-NEXT:    mov v2.d[1], x13
; CHECK-NEXT:    mov v1.d[1], x14
; CHECK-NEXT:    mov v3.d[1], x15
; CHECK-NEXT:    ret
  %a = call <8 x i64> @llvm.lrint.v8i64.v8f16(<8 x half> %x)
  ret <8 x i64> %a
}
declare <8 x i64> @llvm.lrint.v8i64.v8f16(<8 x half>)

define <16 x i64> @lrint_v16i64_v16f16(<16 x half> %x) {
; CHECK-LABEL: lrint_v16i64_v16f16:
; CHECK:       // %bb.0:
; CHECK-NEXT:    fcvtl2 v4.4s, v0.8h
; CHECK-NEXT:    fcvtl2 v2.4s, v1.8h
; CHECK-NEXT:    fcvtl v3.4s, v0.4h
; CHECK-NEXT:    dup v5.2s, v0.s[1]
; CHECK-NEXT:    dup v0.2s, v0.s[3]
; CHECK-NEXT:    dup v6.2s, v1.s[1]
; CHECK-NEXT:    dup v7.2s, v1.s[3]
; CHECK-NEXT:    fcvtl v1.4s, v1.4h
; CHECK-NEXT:    frintx v4.4s, v4.4s
; CHECK-NEXT:    frintx v2.4s, v2.4s
; CHECK-NEXT:    frintx v3.4s, v3.4s
; CHECK-NEXT:    fcvtl v5.4s, v5.4h
; CHECK-NEXT:    fcvtl v0.4s, v0.4h
; CHECK-NEXT:    fcvtl v6.4s, v6.4h
; CHECK-NEXT:    fcvtl v7.4s, v7.4h
; CHECK-NEXT:    frintx v1.4s, v1.4s
; CHECK-NEXT:    fcvtn v4.4h, v4.4s
; CHECK-NEXT:    fcvtn v2.4h, v2.4s
; CHECK-NEXT:    fcvtn v3.4h, v3.4s
; CHECK-NEXT:    frintx v5.4s, v5.4s
; CHECK-NEXT:    frintx v0.4s, v0.4s
; CHECK-NEXT:    frintx v6.4s, v6.4s
; CHECK-NEXT:    frintx v7.4s, v7.4s
; CHECK-NEXT:    fcvtn v1.4h, v1.4s
; CHECK-NEXT:    mov h16, v4.h[1]
; CHECK-NEXT:    fcvt s4, h4
; CHECK-NEXT:    fcvt s17, h2
; CHECK-NEXT:    mov h18, v3.h[1]
; CHECK-NEXT:    fcvtn v5.4h, v5.4s
; CHECK-NEXT:    fcvt s3, h3
; CHECK-NEXT:    fcvtn v0.4h, v0.4s
; CHECK-NEXT:    fcvtn v6.4h, v6.4s
; CHECK-NEXT:    fcvtn v7.4h, v7.4s
; CHECK-NEXT:    mov h2, v2.h[1]
; CHECK-NEXT:    fcvt s16, h16
; CHECK-NEXT:    fcvtzs x8, s4
; CHECK-NEXT:    fcvtzs x9, s17
; CHECK-NEXT:    fcvt s4, h18
; CHECK-NEXT:    fcvt s17, h5
; CHECK-NEXT:    fcvtzs x10, s3
; CHECK-NEXT:    mov h3, v5.h[1]
; CHECK-NEXT:    fcvt s5, h0
; CHECK-NEXT:    mov h0, v0.h[1]
; CHECK-NEXT:    mov h18, v6.h[1]
; CHECK-NEXT:    mov h19, v7.h[1]
; CHECK-NEXT:    fcvtzs x11, s16
; CHECK-NEXT:    mov h16, v1.h[1]
; CHECK-NEXT:    fcvt s1, h1
; CHECK-NEXT:    fcvtzs x12, s4
; CHECK-NEXT:    fcvt s4, h6
; CHECK-NEXT:    fcvtzs x13, s17
; CHECK-NEXT:    fcvtzs x14, s5
; CHECK-NEXT:    fcvt s5, h7
; CHECK-NEXT:    fcvt s3, h3
; CHECK-NEXT:    fcvt s7, h2
; CHECK-NEXT:    fcvt s17, h0
; CHECK-NEXT:    fcvt s18, h18
; CHECK-NEXT:    fcvt s16, h16
; CHECK-NEXT:    fcvt s19, h19
; CHECK-NEXT:    fcvtzs x15, s1
; CHECK-NEXT:    fmov d2, x8
; CHECK-NEXT:    fcvtzs x8, s4
; CHECK-NEXT:    fmov d0, x10
; CHECK-NEXT:    fcvtzs x10, s5
; CHECK-NEXT:    fmov d6, x9
; CHECK-NEXT:    fcvtzs x9, s3
; CHECK-NEXT:    fmov d1, x13
; CHECK-NEXT:    fcvtzs x13, s17
; CHECK-NEXT:    fcvtzs x17, s7
; CHECK-NEXT:    fcvtzs x16, s16
; CHECK-NEXT:    fcvtzs x18, s18
; CHECK-NEXT:    fcvtzs x0, s19
; CHECK-NEXT:    fmov d3, x14
; CHECK-NEXT:    fmov d4, x15
; CHECK-NEXT:    fmov d5, x8
; CHECK-NEXT:    fmov d7, x10
; CHECK-NEXT:    mov v0.d[1], x12
; CHECK-NEXT:    mov v1.d[1], x9
; CHECK-NEXT:    mov v2.d[1], x11
; CHECK-NEXT:    mov v6.d[1], x17
; CHECK-NEXT:    mov v3.d[1], x13
; CHECK-NEXT:    mov v4.d[1], x16
; CHECK-NEXT:    mov v5.d[1], x18
; CHECK-NEXT:    mov v7.d[1], x0
; CHECK-NEXT:    ret
  %a = call <16 x i64> @llvm.lrint.v16i64.v16f16(<16 x half> %x)
  ret <16 x i64> %a
}
declare <16 x i64> @llvm.lrint.v16i64.v16f16(<16 x half>)

define <32 x i64> @lrint_v32i64_v32f16(<32 x half> %x) {
; CHECK-LABEL: lrint_v32i64_v32f16:
; CHECK:       // %bb.0:
; CHECK-NEXT:    dup v4.2s, v1.s[1]
; CHECK-NEXT:    fcvtl v5.4s, v0.4h
; CHECK-NEXT:    dup v6.2s, v1.s[3]
; CHECK-NEXT:    fcvtl v7.4s, v1.4h
; CHECK-NEXT:    dup v16.2s, v2.s[3]
; CHECK-NEXT:    fcvtl v17.4s, v2.4h
; CHECK-NEXT:    dup v19.2s, v2.s[1]
; CHECK-NEXT:    dup v18.2s, v0.s[1]
; CHECK-NEXT:    dup v21.2s, v3.s[1]
; CHECK-NEXT:    dup v24.2s, v3.s[3]
; CHECK-NEXT:    fcvtl2 v1.4s, v1.8h
; CHECK-NEXT:    fcvtl2 v2.4s, v2.8h
; CHECK-NEXT:    fcvtl v4.4s, v4.4h
; CHECK-NEXT:    frintx v5.4s, v5.4s
; CHECK-NEXT:    fcvtl v6.4s, v6.4h
; CHECK-NEXT:    frintx v7.4s, v7.4s
; CHECK-NEXT:    fcvtl v16.4s, v16.4h
; CHECK-NEXT:    frintx v22.4s, v17.4s
; CHECK-NEXT:    fcvtl v19.4s, v19.4h
; CHECK-NEXT:    dup v17.2s, v0.s[3]
; CHECK-NEXT:    fcvtl v21.4s, v21.4h
; CHECK-NEXT:    fcvtl v24.4s, v24.4h
; CHECK-NEXT:    frintx v1.4s, v1.4s
; CHECK-NEXT:    frintx v2.4s, v2.4s
; CHECK-NEXT:    frintx v20.4s, v4.4s
; CHECK-NEXT:    fcvtn v4.4h, v5.4s
; CHECK-NEXT:    frintx v23.4s, v6.4s
; CHECK-NEXT:    fcvtn v5.4h, v7.4s
; CHECK-NEXT:    frintx v25.4s, v16.4s
; CHECK-NEXT:    fcvtn v16.4h, v22.4s
; CHECK-NEXT:    frintx v26.4s, v19.4s
; CHECK-NEXT:    fcvtn v6.4h, v20.4s
; CHECK-NEXT:    fcvtl v20.4s, v3.4h
; CHECK-NEXT:    fcvt s22, h4
; CHECK-NEXT:    fcvtn v7.4h, v23.4s
; CHECK-NEXT:    fcvtl2 v23.4s, v3.8h
; CHECK-NEXT:    fcvtl v3.4s, v18.4h
; CHECK-NEXT:    fcvtn v25.4h, v25.4s
; CHECK-NEXT:    fcvt s27, h5
; CHECK-NEXT:    fcvtl v18.4s, v17.4h
; CHECK-NEXT:    frintx v17.4s, v21.4s
; CHECK-NEXT:    fcvt s29, h16
; CHECK-NEXT:    mov h16, v16.h[1]
; CHECK-NEXT:    frintx v20.4s, v20.4s
; CHECK-NEXT:    fcvtzs x9, s22
; CHECK-NEXT:    fcvt s28, h6
; CHECK-NEXT:    fcvt s22, h7
; CHECK-NEXT:    frintx v19.4s, v3.4s
; CHECK-NEXT:    fcvtn v3.4h, v26.4s
; CHECK-NEXT:    mov h21, v25.h[1]
; CHECK-NEXT:    frintx v23.4s, v23.4s
; CHECK-NEXT:    fcvtzs x10, s27
; CHECK-NEXT:    fcvtl2 v26.4s, v0.8h
; CHECK-NEXT:    fcvt s25, h25
; CHECK-NEXT:    fcvtn v17.4h, v17.4s
; CHECK-NEXT:    fcvtn v20.4h, v20.4s
; CHECK-NEXT:    fcvtzs x12, s28
; CHECK-NEXT:    fcvtzs x14, s29
; CHECK-NEXT:    fcvtzs x13, s22
; CHECK-NEXT:    frintx v22.4s, v24.4s
; CHECK-NEXT:    fcvt s24, h3
; CHECK-NEXT:    fcvt s21, h21
; CHECK-NEXT:    fcvtn v23.4h, v23.4s
; CHECK-NEXT:    fmov d0, x10
; CHECK-NEXT:    fcvtzs x15, s25
; CHECK-NEXT:    mov h25, v17.h[1]
; CHECK-NEXT:    fcvt s17, h17
; CHECK-NEXT:    mov h27, v20.h[1]
; CHECK-NEXT:    fcvt s20, h20
; CHECK-NEXT:    fcvtn v28.4h, v2.4s
; CHECK-NEXT:    fcvtn v22.4h, v22.4s
; CHECK-NEXT:    fcvtzs x10, s24
; CHECK-NEXT:    frintx v24.4s, v26.4s
; CHECK-NEXT:    fcvtzs x11, s21
; CHECK-NEXT:    mov h26, v23.h[1]
; CHECK-NEXT:    fcvt s23, h23
; CHECK-NEXT:    fcvt s25, h25
; CHECK-NEXT:    fmov d2, x13
; CHECK-NEXT:    fcvtzs x13, s17
; CHECK-NEXT:    fcvt s21, h27
; CHECK-NEXT:    fcvtzs x16, s20
; CHECK-NEXT:    fcvtn v27.4h, v1.4s
; CHECK-NEXT:    mov h20, v22.h[1]
; CHECK-NEXT:    fcvt s22, h22
; CHECK-NEXT:    fcvtn v24.4h, v24.4s
; CHECK-NEXT:    fmov d1, x12
; CHECK-NEXT:    fcvtzs x0, s23
; CHECK-NEXT:    fmov d17, x14
; CHECK-NEXT:    fcvtzs x18, s25
; CHECK-NEXT:    mov h25, v28.h[1]
; CHECK-NEXT:    fcvt s23, h28
; CHECK-NEXT:    fcvtzs x12, s21
; CHECK-NEXT:    fcvt s21, h26
; CHECK-NEXT:    fcvt s26, h27
; CHECK-NEXT:    fcvt s20, h20
; CHECK-NEXT:    fcvtzs x17, s22
; CHECK-NEXT:    fcvt s22, h24
; CHECK-NEXT:    frintx v18.4s, v18.4s
; CHECK-NEXT:    mov h3, v3.h[1]
; CHECK-NEXT:    mov h7, v7.h[1]
; CHECK-NEXT:    fcvt s25, h25
; CHECK-NEXT:    fcvtn v19.4h, v19.4s
; CHECK-NEXT:    fcvt s16, h16
; CHECK-NEXT:    fcvtzs x14, s21
; CHECK-NEXT:    fmov d21, x15
; CHECK-NEXT:    mov h5, v5.h[1]
; CHECK-NEXT:    fcvtzs x15, s20
; CHECK-NEXT:    fmov d20, x16
; CHECK-NEXT:    fcvtzs x16, s22
; CHECK-NEXT:    fmov d22, x17
; CHECK-NEXT:    fcvtzs x17, s26
; CHECK-NEXT:    fmov d26, x0
; CHECK-NEXT:    fcvtn v18.4h, v18.4s
; CHECK-NEXT:    mov h6, v6.h[1]
; CHECK-NEXT:    fcvt s3, h3
; CHECK-NEXT:    mov v20.d[1], x12
; CHECK-NEXT:    fcvtzs x12, s25
; CHECK-NEXT:    fcvt s7, h7
; CHECK-NEXT:    mov v26.d[1], x14
; CHECK-NEXT:    mov v22.d[1], x15
; CHECK-NEXT:    fcvtzs x14, s23
; CHECK-NEXT:    fmov d23, x13
; CHECK-NEXT:    mov v21.d[1], x11
; CHECK-NEXT:    mov h4, v4.h[1]
; CHECK-NEXT:    mov h25, v19.h[1]
; CHECK-NEXT:    fcvt s6, h6
; CHECK-NEXT:    fcvtzs x11, s3
; CHECK-NEXT:    fcvt s5, h5
; CHECK-NEXT:    fcvt s19, h19
; CHECK-NEXT:    fcvtzs x13, s7
; CHECK-NEXT:    stp q26, q22, [x8, #224]
; CHECK-NEXT:    mov v23.d[1], x18
; CHECK-NEXT:    mov h26, v27.h[1]
; CHECK-NEXT:    fmov d22, x14
; CHECK-NEXT:    fcvt s4, h4
; CHECK-NEXT:    fmov d3, x16
; CHECK-NEXT:    fcvt s7, h25
; CHECK-NEXT:    fcvtzs x14, s6
; CHECK-NEXT:    mov v2.d[1], x13
; CHECK-NEXT:    stp q20, q23, [x8, #192]
; CHECK-NEXT:    fcvt s23, h26
; CHECK-NEXT:    mov v22.d[1], x12
; CHECK-NEXT:    fmov d20, x10
; CHECK-NEXT:    fcvtzs x10, s16
; CHECK-NEXT:    mov h16, v24.h[1]
; CHECK-NEXT:    mov h24, v18.h[1]
; CHECK-NEXT:    fcvt s18, h18
; CHECK-NEXT:    mov v1.d[1], x14
; CHECK-NEXT:    fcvtzs x14, s7
; CHECK-NEXT:    stp q22, q21, [x8, #160]
; CHECK-NEXT:    fcvtzs x12, s23
; CHECK-NEXT:    fmov d21, x17
; CHECK-NEXT:    fcvt s16, h16
; CHECK-NEXT:    mov v20.d[1], x11
; CHECK-NEXT:    fcvtzs x11, s5
; CHECK-NEXT:    fcvt s22, h24
; CHECK-NEXT:    mov v17.d[1], x10
; CHECK-NEXT:    fcvtzs x10, s18
; CHECK-NEXT:    mov v21.d[1], x12
; CHECK-NEXT:    fcvtzs x12, s19
; CHECK-NEXT:    fcvtzs x15, s16
; CHECK-NEXT:    mov v0.d[1], x11
; CHECK-NEXT:    fcvtzs x11, s4
; CHECK-NEXT:    stp q17, q20, [x8, #128]
; CHECK-NEXT:    fcvtzs x13, s22
; CHECK-NEXT:    fmov d4, x10
; CHECK-NEXT:    stp q21, q2, [x8, #96]
; CHECK-NEXT:    fmov d5, x12
; CHECK-NEXT:    fmov d2, x9
; CHECK-NEXT:    stp q0, q1, [x8, #64]
; CHECK-NEXT:    mov v3.d[1], x15
; CHECK-NEXT:    mov v4.d[1], x13
; CHECK-NEXT:    mov v5.d[1], x14
; CHECK-NEXT:    mov v2.d[1], x11
; CHECK-NEXT:    stp q3, q4, [x8, #32]
; CHECK-NEXT:    stp q2, q5, [x8]
; CHECK-NEXT:    ret
  %a = call <32 x i64> @llvm.lrint.v32i64.v32f16(<32 x half> %x)
  ret <32 x i64> %a
}
declare <32 x i64> @llvm.lrint.v32i64.v32f16(<32 x half>)

define <1 x i64> @lrint_v1f32(<1 x float> %x) {
; CHECK-SD-LABEL: lrint_v1f32:
; CHECK-SD:       // %bb.0:
; CHECK-SD-NEXT:    frintx v0.2s, v0.2s
; CHECK-SD-NEXT:    fcvtl v0.2d, v0.2s
; CHECK-SD-NEXT:    fcvtzs v0.2d, v0.2d
; CHECK-SD-NEXT:    // kill: def $d0 killed $d0 killed $q0
; CHECK-SD-NEXT:    ret
;
; CHECK-GI-LABEL: lrint_v1f32:
; CHECK-GI:       // %bb.0:
; CHECK-GI-NEXT:    frintx s0, s0
; CHECK-GI-NEXT:    fcvtzs x8, s0
; CHECK-GI-NEXT:    fmov d0, x8
; CHECK-GI-NEXT:    ret
  %a = call <1 x i64> @llvm.lrint.v1i64.v1f32(<1 x float> %x)
  ret <1 x i64> %a
}
declare <1 x i64> @llvm.lrint.v1i64.v1f32(<1 x float>)

define <2 x i64> @lrint_v2f32(<2 x float> %x) {
; CHECK-LABEL: lrint_v2f32:
; CHECK:       // %bb.0:
; CHECK-NEXT:    frintx v0.2s, v0.2s
; CHECK-NEXT:    fcvtl v0.2d, v0.2s
; CHECK-NEXT:    fcvtzs v0.2d, v0.2d
; CHECK-NEXT:    ret
  %a = call <2 x i64> @llvm.lrint.v2i64.v2f32(<2 x float> %x)
  ret <2 x i64> %a
}
declare <2 x i64> @llvm.lrint.v2i64.v2f32(<2 x float>)

define <4 x i64> @lrint_v4f32(<4 x float> %x) {
; CHECK-LABEL: lrint_v4f32:
; CHECK:       // %bb.0:
; CHECK-NEXT:    ext v1.16b, v0.16b, v0.16b, #8
; CHECK-NEXT:    frintx v0.2s, v0.2s
; CHECK-NEXT:    frintx v1.2s, v1.2s
; CHECK-NEXT:    fcvtl v0.2d, v0.2s
; CHECK-NEXT:    fcvtl v1.2d, v1.2s
; CHECK-NEXT:    fcvtzs v0.2d, v0.2d
; CHECK-NEXT:    fcvtzs v1.2d, v1.2d
; CHECK-NEXT:    ret
  %a = call <4 x i64> @llvm.lrint.v4i64.v4f32(<4 x float> %x)
  ret <4 x i64> %a
}
declare <4 x i64> @llvm.lrint.v4i64.v4f32(<4 x float>)

define <8 x i64> @lrint_v8f32(<8 x float> %x) {
; CHECK-LABEL: lrint_v8f32:
; CHECK:       // %bb.0:
; CHECK-NEXT:    ext v2.16b, v0.16b, v0.16b, #8
; CHECK-NEXT:    ext v3.16b, v1.16b, v1.16b, #8
; CHECK-NEXT:    frintx v0.2s, v0.2s
; CHECK-NEXT:    frintx v1.2s, v1.2s
; CHECK-NEXT:    frintx v2.2s, v2.2s
; CHECK-NEXT:    frintx v3.2s, v3.2s
; CHECK-NEXT:    fcvtl v0.2d, v0.2s
; CHECK-NEXT:    fcvtl v1.2d, v1.2s
; CHECK-NEXT:    fcvtl v4.2d, v2.2s
; CHECK-NEXT:    fcvtl v3.2d, v3.2s
; CHECK-NEXT:    fcvtzs v0.2d, v0.2d
; CHECK-NEXT:    fcvtzs v2.2d, v1.2d
; CHECK-NEXT:    fcvtzs v1.2d, v4.2d
; CHECK-NEXT:    fcvtzs v3.2d, v3.2d
; CHECK-NEXT:    ret
  %a = call <8 x i64> @llvm.lrint.v8i64.v8f32(<8 x float> %x)
  ret <8 x i64> %a
}
declare <8 x i64> @llvm.lrint.v8i64.v8f32(<8 x float>)

define <16 x i64> @lrint_v16i64_v16f32(<16 x float> %x) {
; CHECK-LABEL: lrint_v16i64_v16f32:
; CHECK:       // %bb.0:
; CHECK-NEXT:    ext v4.16b, v1.16b, v1.16b, #8
; CHECK-NEXT:    ext v5.16b, v0.16b, v0.16b, #8
; CHECK-NEXT:    ext v6.16b, v2.16b, v2.16b, #8
; CHECK-NEXT:    ext v7.16b, v3.16b, v3.16b, #8
; CHECK-NEXT:    frintx v0.2s, v0.2s
; CHECK-NEXT:    frintx v1.2s, v1.2s
; CHECK-NEXT:    frintx v2.2s, v2.2s
; CHECK-NEXT:    frintx v3.2s, v3.2s
; CHECK-NEXT:    frintx v5.2s, v5.2s
; CHECK-NEXT:    frintx v4.2s, v4.2s
; CHECK-NEXT:    frintx v6.2s, v6.2s
; CHECK-NEXT:    frintx v7.2s, v7.2s
; CHECK-NEXT:    fcvtl v0.2d, v0.2s
; CHECK-NEXT:    fcvtl v1.2d, v1.2s
; CHECK-NEXT:    fcvtl v16.2d, v2.2s
; CHECK-NEXT:    fcvtl v18.2d, v3.2s
; CHECK-NEXT:    fcvtl v5.2d, v5.2s
; CHECK-NEXT:    fcvtl v17.2d, v4.2s
; CHECK-NEXT:    fcvtl v19.2d, v6.2s
; CHECK-NEXT:    fcvtl v7.2d, v7.2s
; CHECK-NEXT:    fcvtzs v0.2d, v0.2d
; CHECK-NEXT:    fcvtzs v2.2d, v1.2d
; CHECK-NEXT:    fcvtzs v4.2d, v16.2d
; CHECK-NEXT:    fcvtzs v6.2d, v18.2d
; CHECK-NEXT:    fcvtzs v1.2d, v5.2d
; CHECK-NEXT:    fcvtzs v3.2d, v17.2d
; CHECK-NEXT:    fcvtzs v5.2d, v19.2d
; CHECK-NEXT:    fcvtzs v7.2d, v7.2d
; CHECK-NEXT:    ret
  %a = call <16 x i64> @llvm.lrint.v16i64.v16f32(<16 x float> %x)
  ret <16 x i64> %a
}
declare <16 x i64> @llvm.lrint.v16i64.v16f32(<16 x float>)

define <32 x i64> @lrint_v32i64_v32f32(<32 x float> %x) {
; CHECK-LABEL: lrint_v32i64_v32f32:
; CHECK:       // %bb.0:
; CHECK-NEXT:    ext v16.16b, v7.16b, v7.16b, #8
; CHECK-NEXT:    ext v17.16b, v6.16b, v6.16b, #8
; CHECK-NEXT:    frintx v7.2s, v7.2s
; CHECK-NEXT:    frintx v6.2s, v6.2s
; CHECK-NEXT:    ext v18.16b, v5.16b, v5.16b, #8
; CHECK-NEXT:    ext v21.16b, v4.16b, v4.16b, #8
; CHECK-NEXT:    ext v22.16b, v2.16b, v2.16b, #8
; CHECK-NEXT:    frintx v5.2s, v5.2s
; CHECK-NEXT:    ext v23.16b, v3.16b, v3.16b, #8
; CHECK-NEXT:    frintx v4.2s, v4.2s
; CHECK-NEXT:    ext v19.16b, v0.16b, v0.16b, #8
; CHECK-NEXT:    ext v20.16b, v1.16b, v1.16b, #8
; CHECK-NEXT:    frintx v16.2s, v16.2s
; CHECK-NEXT:    frintx v17.2s, v17.2s
; CHECK-NEXT:    fcvtl v7.2d, v7.2s
; CHECK-NEXT:    fcvtl v6.2d, v6.2s
; CHECK-NEXT:    frintx v18.2s, v18.2s
; CHECK-NEXT:    frintx v21.2s, v21.2s
; CHECK-NEXT:    frintx v2.2s, v2.2s
; CHECK-NEXT:    frintx v3.2s, v3.2s
; CHECK-NEXT:    fcvtl v5.2d, v5.2s
; CHECK-NEXT:    frintx v23.2s, v23.2s
; CHECK-NEXT:    fcvtl v4.2d, v4.2s
; CHECK-NEXT:    frintx v1.2s, v1.2s
; CHECK-NEXT:    fcvtl v16.2d, v16.2s
; CHECK-NEXT:    fcvtl v17.2d, v17.2s
; CHECK-NEXT:    fcvtzs v7.2d, v7.2d
; CHECK-NEXT:    fcvtzs v6.2d, v6.2d
; CHECK-NEXT:    fcvtl v18.2d, v18.2s
; CHECK-NEXT:    fcvtl v21.2d, v21.2s
; CHECK-NEXT:    frintx v20.2s, v20.2s
; CHECK-NEXT:    fcvtl v3.2d, v3.2s
; CHECK-NEXT:    fcvtzs v5.2d, v5.2d
; CHECK-NEXT:    frintx v0.2s, v0.2s
; CHECK-NEXT:    fcvtl v2.2d, v2.2s
; CHECK-NEXT:    fcvtzs v4.2d, v4.2d
; CHECK-NEXT:    fcvtzs v16.2d, v16.2d
; CHECK-NEXT:    fcvtzs v17.2d, v17.2d
; CHECK-NEXT:    fcvtl v1.2d, v1.2s
; CHECK-NEXT:    fcvtzs v3.2d, v3.2d
; CHECK-NEXT:    fcvtl v0.2d, v0.2s
; CHECK-NEXT:    fcvtzs v2.2d, v2.2d
; CHECK-NEXT:    stp q6, q17, [x8, #192]
; CHECK-NEXT:    fcvtl v6.2d, v23.2s
; CHECK-NEXT:    frintx v17.2s, v19.2s
; CHECK-NEXT:    stp q7, q16, [x8, #224]
; CHECK-NEXT:    frintx v7.2s, v22.2s
; CHECK-NEXT:    fcvtzs v16.2d, v18.2d
; CHECK-NEXT:    fcvtzs v18.2d, v21.2d
; CHECK-NEXT:    fcvtzs v1.2d, v1.2d
; CHECK-NEXT:    fcvtzs v0.2d, v0.2d
; CHECK-NEXT:    fcvtzs v6.2d, v6.2d
; CHECK-NEXT:    stp q5, q16, [x8, #160]
; CHECK-NEXT:    fcvtl v7.2d, v7.2s
; CHECK-NEXT:    fcvtl v5.2d, v20.2s
; CHECK-NEXT:    stp q4, q18, [x8, #128]
; CHECK-NEXT:    fcvtl v4.2d, v17.2s
; CHECK-NEXT:    stp q3, q6, [x8, #96]
; CHECK-NEXT:    fcvtzs v7.2d, v7.2d
; CHECK-NEXT:    fcvtzs v3.2d, v5.2d
; CHECK-NEXT:    stp q1, q3, [x8, #32]
; CHECK-NEXT:    stp q2, q7, [x8, #64]
; CHECK-NEXT:    fcvtzs v2.2d, v4.2d
; CHECK-NEXT:    stp q0, q2, [x8]
; CHECK-NEXT:    ret
  %a = call <32 x i64> @llvm.lrint.v32i64.v32f32(<32 x float> %x)
  ret <32 x i64> %a
}
declare <32 x i64> @llvm.lrint.v32i64.v32f32(<32 x float>)

define <1 x i64> @lrint_v1f64(<1 x double> %x) {
; CHECK-LABEL: lrint_v1f64:
; CHECK:       // %bb.0:
; CHECK-NEXT:    frintx d0, d0
; CHECK-NEXT:    fcvtzs x8, d0
; CHECK-NEXT:    fmov d0, x8
; CHECK-NEXT:    ret
  %a = call <1 x i64> @llvm.lrint.v1i64.v1f64(<1 x double> %x)
  ret <1 x i64> %a
}
declare <1 x i64> @llvm.lrint.v1i64.v1f64(<1 x double>)

define <2 x i64> @lrint_v2f64(<2 x double> %x) {
; CHECK-LABEL: lrint_v2f64:
; CHECK:       // %bb.0:
; CHECK-NEXT:    frintx v0.2d, v0.2d
; CHECK-NEXT:    fcvtzs v0.2d, v0.2d
; CHECK-NEXT:    ret
  %a = call <2 x i64> @llvm.lrint.v2i64.v2f64(<2 x double> %x)
  ret <2 x i64> %a
}
declare <2 x i64> @llvm.lrint.v2i64.v2f64(<2 x double>)

define <4 x i64> @lrint_v4f64(<4 x double> %x) {
; CHECK-LABEL: lrint_v4f64:
; CHECK:       // %bb.0:
; CHECK-NEXT:    frintx v0.2d, v0.2d
; CHECK-NEXT:    frintx v1.2d, v1.2d
; CHECK-NEXT:    fcvtzs v0.2d, v0.2d
; CHECK-NEXT:    fcvtzs v1.2d, v1.2d
; CHECK-NEXT:    ret
  %a = call <4 x i64> @llvm.lrint.v4i64.v4f64(<4 x double> %x)
  ret <4 x i64> %a
}
declare <4 x i64> @llvm.lrint.v4i64.v4f64(<4 x double>)

define <8 x i64> @lrint_v8f64(<8 x double> %x) {
; CHECK-LABEL: lrint_v8f64:
; CHECK:       // %bb.0:
; CHECK-NEXT:    frintx v0.2d, v0.2d
; CHECK-NEXT:    frintx v1.2d, v1.2d
; CHECK-NEXT:    frintx v2.2d, v2.2d
; CHECK-NEXT:    frintx v3.2d, v3.2d
; CHECK-NEXT:    fcvtzs v0.2d, v0.2d
; CHECK-NEXT:    fcvtzs v1.2d, v1.2d
; CHECK-NEXT:    fcvtzs v2.2d, v2.2d
; CHECK-NEXT:    fcvtzs v3.2d, v3.2d
; CHECK-NEXT:    ret
  %a = call <8 x i64> @llvm.lrint.v8i64.v8f64(<8 x double> %x)
  ret <8 x i64> %a
}
declare <8 x i64> @llvm.lrint.v8i64.v8f64(<8 x double>)

define <16 x i64> @lrint_v16f64(<16 x double> %x) {
; CHECK-LABEL: lrint_v16f64:
; CHECK:       // %bb.0:
; CHECK-NEXT:    frintx v0.2d, v0.2d
; CHECK-NEXT:    frintx v1.2d, v1.2d
; CHECK-NEXT:    frintx v2.2d, v2.2d
; CHECK-NEXT:    frintx v3.2d, v3.2d
; CHECK-NEXT:    frintx v4.2d, v4.2d
; CHECK-NEXT:    frintx v5.2d, v5.2d
; CHECK-NEXT:    frintx v6.2d, v6.2d
; CHECK-NEXT:    frintx v7.2d, v7.2d
; CHECK-NEXT:    fcvtzs v0.2d, v0.2d
; CHECK-NEXT:    fcvtzs v1.2d, v1.2d
; CHECK-NEXT:    fcvtzs v2.2d, v2.2d
; CHECK-NEXT:    fcvtzs v3.2d, v3.2d
; CHECK-NEXT:    fcvtzs v4.2d, v4.2d
; CHECK-NEXT:    fcvtzs v5.2d, v5.2d
; CHECK-NEXT:    fcvtzs v6.2d, v6.2d
; CHECK-NEXT:    fcvtzs v7.2d, v7.2d
; CHECK-NEXT:    ret
  %a = call <16 x i64> @llvm.lrint.v16i64.v16f64(<16 x double> %x)
  ret <16 x i64> %a
}
declare <16 x i64> @llvm.lrint.v16i64.v16f64(<16 x double>)

define <32 x i64> @lrint_v32f64(<32 x double> %x) {
; CHECK-LABEL: lrint_v32f64:
; CHECK:       // %bb.0:
; CHECK-NEXT:    ldp q17, q16, [sp, #96]
; CHECK-NEXT:    frintx v7.2d, v7.2d
; CHECK-NEXT:    ldp q19, q18, [sp, #64]
; CHECK-NEXT:    frintx v6.2d, v6.2d
; CHECK-NEXT:    ldp q21, q20, [sp, #32]
; CHECK-NEXT:    frintx v5.2d, v5.2d
; CHECK-NEXT:    frintx v16.2d, v16.2d
; CHECK-NEXT:    frintx v17.2d, v17.2d
; CHECK-NEXT:    frintx v4.2d, v4.2d
; CHECK-NEXT:    frintx v18.2d, v18.2d
; CHECK-NEXT:    frintx v19.2d, v19.2d
; CHECK-NEXT:    frintx v3.2d, v3.2d
; CHECK-NEXT:    ldp q23, q22, [sp]
; CHECK-NEXT:    frintx v20.2d, v20.2d
; CHECK-NEXT:    frintx v21.2d, v21.2d
; CHECK-NEXT:    frintx v2.2d, v2.2d
; CHECK-NEXT:    frintx v1.2d, v1.2d
; CHECK-NEXT:    fcvtzs v16.2d, v16.2d
; CHECK-NEXT:    fcvtzs v17.2d, v17.2d
; CHECK-NEXT:    frintx v0.2d, v0.2d
; CHECK-NEXT:    frintx v22.2d, v22.2d
; CHECK-NEXT:    fcvtzs v18.2d, v18.2d
; CHECK-NEXT:    frintx v23.2d, v23.2d
; CHECK-NEXT:    fcvtzs v19.2d, v19.2d
; CHECK-NEXT:    fcvtzs v20.2d, v20.2d
; CHECK-NEXT:    fcvtzs v7.2d, v7.2d
; CHECK-NEXT:    fcvtzs v6.2d, v6.2d
; CHECK-NEXT:    fcvtzs v5.2d, v5.2d
; CHECK-NEXT:    fcvtzs v4.2d, v4.2d
; CHECK-NEXT:    stp q17, q16, [x8, #224]
; CHECK-NEXT:    fcvtzs v16.2d, v21.2d
; CHECK-NEXT:    fcvtzs v3.2d, v3.2d
; CHECK-NEXT:    fcvtzs v17.2d, v22.2d
; CHECK-NEXT:    fcvtzs v2.2d, v2.2d
; CHECK-NEXT:    fcvtzs v1.2d, v1.2d
; CHECK-NEXT:    stp q19, q18, [x8, #192]
; CHECK-NEXT:    fcvtzs v18.2d, v23.2d
; CHECK-NEXT:    fcvtzs v0.2d, v0.2d
; CHECK-NEXT:    stp q4, q5, [x8, #64]
; CHECK-NEXT:    stp q6, q7, [x8, #96]
; CHECK-NEXT:    stp q2, q3, [x8, #32]
; CHECK-NEXT:    stp q0, q1, [x8]
; CHECK-NEXT:    stp q18, q17, [x8, #128]
; CHECK-NEXT:    stp q16, q20, [x8, #160]
; CHECK-NEXT:    ret
  %a = call <32 x i64> @llvm.lrint.v32i64.v16f64(<32 x double> %x)
  ret <32 x i64> %a
}
declare <32 x i64> @llvm.lrint.v32i64.v32f64(<32 x double>)
