; NOTE: Assertions have been autogenerated by utils/update_llc_test_checks.py UTC_ARGS: --version 4
; RUN: llc -verify-machineinstrs -O3 -mcpu=pwr7 < %s | FileCheck  %s -check-prefix=CHECK
; RUN: llc -verify-machineinstrs -O3 -mcpu=pwr9 < %s | FileCheck  %s -check-prefix=FIXPOINT
target datalayout = "E-m:e-i64:64-n32:64"
target triple = "powerpc64-unknown-linux-gnu"

; Verify that the first two adds are independent regardless of how the inputs are
; commuted. The destination registers are used as source registers for the third add.

define float @reassociate_adds1(float %x0, float %x1, float %x2, float %x3) {
; CHECK-LABEL: reassociate_adds1:
; CHECK:       # %bb.0:
; CHECK-NEXT:    fadds 0, 2, 3
; CHECK-NEXT:    fadds 1, 1, 4
; CHECK-NEXT:    fadds 1, 1, 0
; CHECK-NEXT:    blr
;
; FIXPOINT-LABEL: reassociate_adds1:
; FIXPOINT:       # %bb.0:
; FIXPOINT-NEXT:    xsaddsp 0, 1, 2
; FIXPOINT-NEXT:    xsaddsp 1, 3, 4
; FIXPOINT-NEXT:    xsaddsp 1, 0, 1
; FIXPOINT-NEXT:    blr

  %t0 = fadd reassoc nsz float %x0, %x1
  %t1 = fadd reassoc nsz float %t0, %x2
  %t2 = fadd reassoc nsz float %t1, %x3
  ret float %t2
}

define float @reassociate_adds2(float %x0, float %x1, float %x2, float %x3) {
; CHECK-LABEL: reassociate_adds2:
; CHECK:       # %bb.0:
; CHECK-NEXT:    fadds 0, 3, 2
; CHECK-NEXT:    fadds 1, 1, 4
; CHECK-NEXT:    fadds 1, 0, 1
; CHECK-NEXT:    blr
;
; FIXPOINT-LABEL: reassociate_adds2:
; FIXPOINT:       # %bb.0:
; FIXPOINT-NEXT:    xsaddsp 0, 1, 2
; FIXPOINT-NEXT:    xsaddsp 1, 3, 4
; FIXPOINT-NEXT:    xsaddsp 1, 1, 0
; FIXPOINT-NEXT:    blr

  %t0 = fadd reassoc nsz float %x0, %x1
  %t1 = fadd reassoc nsz float %x2, %t0
  %t2 = fadd reassoc nsz float %t1, %x3
  ret float %t2
}

define float @reassociate_adds3(float %x0, float %x1, float %x2, float %x3) {
; CHECK-LABEL: reassociate_adds3:
; CHECK:       # %bb.0:
; CHECK-NEXT:    fadds 0, 2, 3
; CHECK-NEXT:    fadds 1, 4, 1
; CHECK-NEXT:    fadds 1, 1, 0
; CHECK-NEXT:    blr
;
; FIXPOINT-LABEL: reassociate_adds3:
; FIXPOINT:       # %bb.0:
; FIXPOINT-NEXT:    xsaddsp 0, 1, 2
; FIXPOINT-NEXT:    xsaddsp 1, 4, 3
; FIXPOINT-NEXT:    xsaddsp 1, 1, 0
; FIXPOINT-NEXT:    blr

  %t0 = fadd reassoc nsz float %x0, %x1
  %t1 = fadd reassoc nsz float %t0, %x2
  %t2 = fadd reassoc nsz float %x3, %t1
  ret float %t2
}

define float @reassociate_adds4(float %x0, float %x1, float %x2, float %x3) {
; CHECK-LABEL: reassociate_adds4:
; CHECK:       # %bb.0:
; CHECK-NEXT:    fadds 0, 3, 2
; CHECK-NEXT:    fadds 1, 4, 1
; CHECK-NEXT:    fadds 1, 1, 0
; CHECK-NEXT:    blr
;
; FIXPOINT-LABEL: reassociate_adds4:
; FIXPOINT:       # %bb.0:
; FIXPOINT-NEXT:    xsaddsp 0, 1, 2
; FIXPOINT-NEXT:    xsaddsp 1, 4, 3
; FIXPOINT-NEXT:    xsaddsp 1, 1, 0
; FIXPOINT-NEXT:    blr

  %t0 = fadd reassoc nsz float %x0, %x1
  %t1 = fadd reassoc nsz float %x2, %t0
  %t2 = fadd reassoc nsz float %x3, %t1
  ret float %t2
}

; Verify that we reassociate some of these ops. The optimal balanced tree of adds is not
; produced because that would cost more compile time.

define float @reassociate_adds5(float %x0, float %x1, float %x2, float %x3, float %x4, float %x5, float %x6, float %x7) {
; CHECK-LABEL: reassociate_adds5:
; CHECK:       # %bb.0:
; CHECK-NEXT:    fadds 0, 2, 3
; CHECK-NEXT:    fadds 1, 1, 4
; CHECK-NEXT:    fadds 0, 1, 0
; CHECK-NEXT:    fadds 1, 5, 6
; CHECK-NEXT:    fadds 1, 1, 7
; CHECK-NEXT:    fadds 0, 0, 1
; CHECK-NEXT:    fadds 1, 0, 8
; CHECK-NEXT:    blr
;
; FIXPOINT-LABEL: reassociate_adds5:
; FIXPOINT:       # %bb.0:
; FIXPOINT-NEXT:    xsaddsp 0, 1, 2
; FIXPOINT-NEXT:    xsaddsp 1, 3, 4
; FIXPOINT-NEXT:    xsaddsp 0, 0, 1
; FIXPOINT-NEXT:    xsaddsp 1, 5, 6
; FIXPOINT-NEXT:    xsaddsp 1, 1, 7
; FIXPOINT-NEXT:    xsaddsp 0, 0, 1
; FIXPOINT-NEXT:    xsaddsp 1, 0, 8
; FIXPOINT-NEXT:    blr

  %t0 = fadd reassoc nsz float %x0, %x1
  %t1 = fadd reassoc nsz float %t0, %x2
  %t2 = fadd reassoc nsz float %t1, %x3
  %t3 = fadd reassoc nsz float %t2, %x4
  %t4 = fadd reassoc nsz float %t3, %x5
  %t5 = fadd reassoc nsz float %t4, %x6
  %t6 = fadd reassoc nsz float %t5, %x7
  ret float %t6
}

; Verify that we reassociate vector instructions too.

define <4 x float> @vector_reassociate_adds1(<4 x float> %x0, <4 x float> %x1, <4 x float> %x2, <4 x float> %x3) {
; CHECK-LABEL: vector_reassociate_adds1:
; CHECK:       # %bb.0:
; CHECK-NEXT:    xvaddsp 0, 35, 36
; CHECK-NEXT:    xvaddsp 1, 34, 37
; CHECK-NEXT:    xvaddsp 34, 1, 0
; CHECK-NEXT:    blr
;
; FIXPOINT-LABEL: vector_reassociate_adds1:
; FIXPOINT:       # %bb.0:
; FIXPOINT-NEXT:    xvaddsp 0, 34, 35
; FIXPOINT-NEXT:    xvaddsp 1, 36, 37
; FIXPOINT-NEXT:    xvaddsp 34, 0, 1
; FIXPOINT-NEXT:    blr

  %t0 = fadd reassoc nsz <4 x float> %x0, %x1
  %t1 = fadd reassoc nsz <4 x float> %t0, %x2
  %t2 = fadd reassoc nsz <4 x float> %t1, %x3
  ret <4 x float> %t2
}

define <4 x float> @vector_reassociate_adds2(<4 x float> %x0, <4 x float> %x1, <4 x float> %x2, <4 x float> %x3) {
; CHECK-LABEL: vector_reassociate_adds2:
; CHECK:       # %bb.0:
; CHECK-NEXT:    xvaddsp 0, 36, 35
; CHECK-NEXT:    xvaddsp 1, 34, 37
; CHECK-NEXT:    xvaddsp 34, 0, 1
; CHECK-NEXT:    blr
;
; FIXPOINT-LABEL: vector_reassociate_adds2:
; FIXPOINT:       # %bb.0:
; FIXPOINT-NEXT:    xvaddsp 0, 34, 35
; FIXPOINT-NEXT:    xvaddsp 1, 36, 37
; FIXPOINT-NEXT:    xvaddsp 34, 1, 0
; FIXPOINT-NEXT:    blr

  %t0 = fadd reassoc nsz <4 x float> %x0, %x1
  %t1 = fadd reassoc nsz <4 x float> %x2, %t0
  %t2 = fadd reassoc nsz <4 x float> %t1, %x3
  ret <4 x float> %t2
}

define <4 x float> @vector_reassociate_adds3(<4 x float> %x0, <4 x float> %x1, <4 x float> %x2, <4 x float> %x3) {
; CHECK-LABEL: vector_reassociate_adds3:
; CHECK:       # %bb.0:
; CHECK-NEXT:    xvaddsp 0, 35, 36
; CHECK-NEXT:    xvaddsp 1, 37, 34
; CHECK-NEXT:    xvaddsp 34, 1, 0
; CHECK-NEXT:    blr
;
; FIXPOINT-LABEL: vector_reassociate_adds3:
; FIXPOINT:       # %bb.0:
; FIXPOINT-NEXT:    xvaddsp 0, 34, 35
; FIXPOINT-NEXT:    xvaddsp 1, 37, 36
; FIXPOINT-NEXT:    xvaddsp 34, 1, 0
; FIXPOINT-NEXT:    blr

  %t0 = fadd reassoc nsz <4 x float> %x0, %x1
  %t1 = fadd reassoc nsz <4 x float> %t0, %x2
  %t2 = fadd reassoc nsz <4 x float> %x3, %t1
  ret <4 x float> %t2
}

define <4 x float> @vector_reassociate_adds4(<4 x float> %x0, <4 x float> %x1, <4 x float> %x2, <4 x float> %x3) {
; CHECK-LABEL: vector_reassociate_adds4:
; CHECK:       # %bb.0:
; CHECK-NEXT:    xvaddsp 0, 36, 35
; CHECK-NEXT:    xvaddsp 1, 37, 34
; CHECK-NEXT:    xvaddsp 34, 1, 0
; CHECK-NEXT:    blr
;
; FIXPOINT-LABEL: vector_reassociate_adds4:
; FIXPOINT:       # %bb.0:
; FIXPOINT-NEXT:    xvaddsp 0, 34, 35
; FIXPOINT-NEXT:    xvaddsp 1, 37, 36
; FIXPOINT-NEXT:    xvaddsp 34, 1, 0
; FIXPOINT-NEXT:    blr

  %t0 = fadd reassoc nsz <4 x float> %x0, %x1
  %t1 = fadd reassoc nsz <4 x float> %x2, %t0
  %t2 = fadd reassoc nsz <4 x float> %x3, %t1
  ret <4 x float> %t2
}

define float @reassociate_adds6(float %x0, float %x1, float %x2, float %x3) {
; CHECK-LABEL: reassociate_adds6:
; CHECK:       # %bb.0:
; CHECK-NEXT:    fdivs 0, 1, 2
; CHECK-NEXT:    fadds 0, 3, 0
; CHECK-NEXT:    fadds 1, 4, 0
; CHECK-NEXT:    blr
;
; FIXPOINT-LABEL: reassociate_adds6:
; FIXPOINT:       # %bb.0:
; FIXPOINT-NEXT:    xsdivsp 0, 1, 2
; FIXPOINT-NEXT:    xsaddsp 0, 3, 0
; FIXPOINT-NEXT:    xsaddsp 1, 4, 0
; FIXPOINT-NEXT:    blr
  %t0 = fdiv float %x0, %x1
  %t1 = fadd float %x2, %t0
  %t2 = fadd float %x3, %t1
  ret float %t2
}

define float @reassociate_muls1(float %x0, float %x1, float %x2, float %x3) {
; CHECK-LABEL: reassociate_muls1:
; CHECK:       # %bb.0:
; CHECK-NEXT:    fdivs 0, 1, 2
; CHECK-NEXT:    fmuls 0, 3, 0
; CHECK-NEXT:    fmuls 1, 4, 0
; CHECK-NEXT:    blr
;
; FIXPOINT-LABEL: reassociate_muls1:
; FIXPOINT:       # %bb.0:
; FIXPOINT-NEXT:    xsdivsp 0, 1, 2
; FIXPOINT-NEXT:    xsmulsp 0, 3, 0
; FIXPOINT-NEXT:    xsmulsp 1, 4, 0
; FIXPOINT-NEXT:    blr
  %t0 = fdiv float %x0, %x1
  %t1 = fmul float %x2, %t0
  %t2 = fmul float %x3, %t1
  ret float %t2
}

define double @reassociate_adds_double(double %x0, double %x1, double %x2, double %x3) {
; CHECK-LABEL: reassociate_adds_double:
; CHECK:       # %bb.0:
; CHECK-NEXT:    xsdivdp 0, 1, 2
; CHECK-NEXT:    xsadddp 0, 3, 0
; CHECK-NEXT:    xsadddp 1, 4, 0
; CHECK-NEXT:    blr
;
; FIXPOINT-LABEL: reassociate_adds_double:
; FIXPOINT:       # %bb.0:
; FIXPOINT-NEXT:    xsdivdp 0, 1, 2
; FIXPOINT-NEXT:    xsadddp 0, 3, 0
; FIXPOINT-NEXT:    xsadddp 1, 4, 0
; FIXPOINT-NEXT:    blr
  %t0 = fdiv double %x0, %x1
  %t1 = fadd double %x2, %t0
  %t2 = fadd double %x3, %t1
  ret double %t2
}

define double @reassociate_muls_double(double %x0, double %x1, double %x2, double %x3) {
; CHECK-LABEL: reassociate_muls_double:
; CHECK:       # %bb.0:
; CHECK-NEXT:    xsdivdp 0, 1, 2
; CHECK-NEXT:    xsmuldp 0, 3, 0
; CHECK-NEXT:    xsmuldp 1, 4, 0
; CHECK-NEXT:    blr
;
; FIXPOINT-LABEL: reassociate_muls_double:
; FIXPOINT:       # %bb.0:
; FIXPOINT-NEXT:    xsdivdp 0, 1, 2
; FIXPOINT-NEXT:    xsmuldp 0, 3, 0
; FIXPOINT-NEXT:    xsmuldp 1, 4, 0
; FIXPOINT-NEXT:    blr
  %t0 = fdiv double %x0, %x1
  %t1 = fmul double %x2, %t0
  %t2 = fmul double %x3, %t1
  ret double %t2
}

define i32 @reassociate_mullw(i32 %x0, i32 %x1, i32 %x2, i32 %x3) {
; CHECK-LABEL: reassociate_mullw:
; CHECK:       # %bb.0:
; CHECK-NEXT:    mullw 4, 4, 5
; CHECK-NEXT:    mullw 3, 3, 6
; CHECK-NEXT:    mullw 3, 3, 4
; CHECK-NEXT:    blr
;
; FIXPOINT-LABEL: reassociate_mullw:
; FIXPOINT:       # %bb.0:
; FIXPOINT-NEXT:    mullw 3, 3, 4
; FIXPOINT-NEXT:    mullw 4, 5, 6
; FIXPOINT-NEXT:    mullw 3, 3, 4
; FIXPOINT-NEXT:    blr

  %t0 = mul i32 %x0, %x1
  %t1 = mul i32 %t0, %x2
  %t2 = mul i32 %t1, %x3
  ret i32 %t2
}

define i64 @reassociate_mulld(i64 %x0, i64 %x1, i64 %x2, i64 %x3) {
; CHECK-LABEL: reassociate_mulld:
; CHECK:       # %bb.0:
; CHECK-NEXT:    mulld 4, 4, 5
; CHECK-NEXT:    mulld 3, 3, 6
; CHECK-NEXT:    mulld 3, 3, 4
; CHECK-NEXT:    blr
;
; FIXPOINT-LABEL: reassociate_mulld:
; FIXPOINT:       # %bb.0:
; FIXPOINT-NEXT:    mulld 3, 3, 4
; FIXPOINT-NEXT:    mulld 4, 5, 6
; FIXPOINT-NEXT:    mulld 3, 3, 4
; FIXPOINT-NEXT:    blr

  %t0 = mul i64 %x0, %x1
  %t1 = mul i64 %t0, %x2
  %t2 = mul i64 %t1, %x3
  ret i64 %t2
}

define double @reassociate_mamaa_double(double %0, double %1, double %2, double %3, double %4, double %5) {
; CHECK-LABEL: reassociate_mamaa_double:
; CHECK:       # %bb.0:
; CHECK-NEXT:    xsmaddadp 1, 6, 5
; CHECK-NEXT:    xsmaddadp 2, 4, 3
; CHECK-NEXT:    xsadddp 1, 2, 1
; CHECK-NEXT:    blr
;
; FIXPOINT-LABEL: reassociate_mamaa_double:
; FIXPOINT:       # %bb.0:
; FIXPOINT-NEXT:    xsmaddadp 1, 6, 5
; FIXPOINT-NEXT:    xsmaddadp 2, 4, 3
; FIXPOINT-NEXT:    xsadddp 1, 2, 1
; FIXPOINT-NEXT:    blr
  %7 = fmul contract reassoc nsz double %3, %2
  %8 = fmul contract reassoc nsz double %5, %4
  %9 = fadd contract reassoc nsz double %1, %0
  %10 = fadd contract reassoc nsz double %9, %7
  %11 = fadd contract reassoc nsz double %10, %8
  ret double %11
}

define float @reassociate_mamaa_float(float %0, float %1, float %2, float %3, float %4, float %5) {
; CHECK-LABEL: reassociate_mamaa_float:
; CHECK:       # %bb.0:
; CHECK-NEXT:    fmadds 0, 6, 5, 1
; CHECK-NEXT:    fmadds 1, 4, 3, 2
; CHECK-NEXT:    fadds 1, 1, 0
; CHECK-NEXT:    blr
;
; FIXPOINT-LABEL: reassociate_mamaa_float:
; FIXPOINT:       # %bb.0:
; FIXPOINT-NEXT:    xsmaddasp 1, 6, 5
; FIXPOINT-NEXT:    xsmaddasp 2, 4, 3
; FIXPOINT-NEXT:    xsaddsp 1, 2, 1
; FIXPOINT-NEXT:    blr
  %7 = fmul contract reassoc nsz float %3, %2
  %8 = fmul contract reassoc nsz float %5, %4
  %9 = fadd contract reassoc nsz float %1, %0
  %10 = fadd contract reassoc nsz float %9, %7
  %11 = fadd contract reassoc nsz float %10, %8
  ret float %11
}

define <4 x float> @reassociate_mamaa_vec(<4 x float> %0, <4 x float> %1, <4 x float> %2, <4 x float> %3, <4 x float> %4, <4 x float> %5) {
; CHECK-LABEL: reassociate_mamaa_vec:
; CHECK:       # %bb.0:
; CHECK-NEXT:    xvmaddasp 34, 39, 38
; CHECK-NEXT:    xvmaddasp 35, 37, 36
; CHECK-NEXT:    xvaddsp 34, 35, 34
; CHECK-NEXT:    blr
;
; FIXPOINT-LABEL: reassociate_mamaa_vec:
; FIXPOINT:       # %bb.0:
; FIXPOINT-NEXT:    xvmaddasp 34, 39, 38
; FIXPOINT-NEXT:    xvmaddasp 35, 37, 36
; FIXPOINT-NEXT:    xvaddsp 34, 35, 34
; FIXPOINT-NEXT:    blr
  %7 = fmul contract reassoc nsz <4 x float> %3, %2
  %8 = fmul contract reassoc nsz <4 x float> %5, %4
  %9 = fadd contract reassoc nsz <4 x float> %1, %0
  %10 = fadd contract reassoc nsz <4 x float> %9, %7
  %11 = fadd contract reassoc nsz <4 x float> %10, %8
  ret <4 x float> %11
}

define double @reassociate_mamama_double(double %0, double %1, double %2, double %3, double %4, double %5, double %6, double %7, double %8) {
; CHECK-LABEL: reassociate_mamama_double:
; CHECK:       # %bb.0:
; CHECK-NEXT:    xsmuldp 0, 2, 1
; CHECK-NEXT:    xsmaddadp 7, 4, 3
; CHECK-NEXT:    xsmaddadp 0, 6, 5
; CHECK-NEXT:    xsadddp 1, 7, 0
; CHECK-NEXT:    xsmaddadp 1, 9, 8
; CHECK-NEXT:    blr
;
; FIXPOINT-LABEL: reassociate_mamama_double:
; FIXPOINT:       # %bb.0:
; FIXPOINT-NEXT:    xsmaddadp 7, 2, 1
; FIXPOINT-NEXT:    xsmuldp 0, 4, 3
; FIXPOINT-NEXT:    xsmaddadp 7, 6, 5
; FIXPOINT-NEXT:    xsmaddadp 0, 9, 8
; FIXPOINT-NEXT:    xsadddp 1, 7, 0
; FIXPOINT-NEXT:    blr
  %10 = fmul contract reassoc nsz double %1, %0
  %11 = fmul contract reassoc nsz double %3, %2
  %12 = fmul contract reassoc nsz double %5, %4
  %13 = fmul contract reassoc nsz double %8, %7
  %14 = fadd contract reassoc nsz double %11, %10
  %15 = fadd contract reassoc nsz double %14, %6
  %16 = fadd contract reassoc nsz double %15, %12
  %17 = fadd contract reassoc nsz double %16, %13
  ret double %17
}

define dso_local float @reassociate_mamama_8(float %0, float %1, float %2, float %3, float %4, float %5, float %6, float %7, float %8,
; CHECK-LABEL: reassociate_mamama_8:
; CHECK:       # %bb.0:
; CHECK-NEXT:    fmuls 2, 3, 2
; CHECK-NEXT:    fmadds 1, 5, 4, 1
; CHECK-NEXT:    lfs 0, 172(1)
; CHECK-NEXT:    stfd 29, -24(1) # 8-byte Folded Spill
; CHECK-NEXT:    stfd 30, -16(1) # 8-byte Folded Spill
; CHECK-NEXT:    lfs 30, 156(1)
; CHECK-NEXT:    lfs 29, 164(1)
; CHECK-NEXT:    fmadds 2, 7, 6, 2
; CHECK-NEXT:    fmadds 1, 9, 8, 1
; CHECK-NEXT:    stfd 31, -8(1) # 8-byte Folded Spill
; CHECK-NEXT:    lfs 31, 180(1)
; CHECK-NEXT:    fmadds 2, 11, 10, 2
; CHECK-NEXT:    fmadds 1, 13, 12, 1
; CHECK-NEXT:    fmadds 2, 29, 30, 2
; CHECK-NEXT:    lfd 30, -16(1) # 8-byte Folded Reload
; CHECK-NEXT:    lfd 29, -24(1) # 8-byte Folded Reload
; CHECK-NEXT:    fadds 1, 1, 2
; CHECK-NEXT:    fmadds 1, 31, 0, 1
; CHECK-NEXT:    lfd 31, -8(1) # 8-byte Folded Reload
; CHECK-NEXT:    blr
;
; FIXPOINT-LABEL: reassociate_mamama_8:
; FIXPOINT:       # %bb.0:
; FIXPOINT-NEXT:    xsmaddasp 1, 3, 2
; FIXPOINT-NEXT:    xsmulsp 2, 5, 4
; FIXPOINT-NEXT:    lxssp 2, 180(1)
; FIXPOINT-NEXT:    lxssp 3, 156(1)
; FIXPOINT-NEXT:    lxssp 4, 164(1)
; FIXPOINT-NEXT:    xsmaddasp 1, 7, 6
; FIXPOINT-NEXT:    xsmaddasp 2, 9, 8
; FIXPOINT-NEXT:    lfs 0, 172(1)
; FIXPOINT-NEXT:    xsmaddasp 2, 13, 12
; FIXPOINT-NEXT:    xsmaddasp 1, 11, 10
; FIXPOINT-NEXT:    xsmaddasp 2, 34, 0
; FIXPOINT-NEXT:    xsmaddasp 1, 36, 35
; FIXPOINT-NEXT:    xsaddsp 1, 1, 2
; FIXPOINT-NEXT:    blr
                                             float %9, float %10, float %11, float %12, float %13, float %14, float %15, float %16) {
  %18 = fmul contract reassoc nsz float %2, %1
  %19 = fadd contract reassoc nsz float %18, %0
  %20 = fmul contract reassoc nsz float %4, %3
  %21 = fadd contract reassoc nsz float %19, %20
  %22 = fmul contract reassoc nsz float %6, %5
  %23 = fadd contract reassoc nsz float %21, %22
  %24 = fmul contract reassoc nsz float %8, %7
  %25 = fadd contract reassoc nsz float %23, %24
  %26 = fmul contract reassoc nsz float %10, %9
  %27 = fadd contract reassoc nsz float %25, %26
  %28 = fmul contract reassoc nsz float %12, %11
  %29 = fadd contract reassoc nsz float %27, %28
  %30 = fmul contract reassoc nsz float %14, %13
  %31 = fadd contract reassoc nsz float %29, %30
  %32 = fmul contract reassoc nsz float %16, %15
  %33 = fadd contract reassoc nsz float %31, %32
  ret float %33
}

