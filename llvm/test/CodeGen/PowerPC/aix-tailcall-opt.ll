; NOTE: Assertions have been autogenerated by utils/update_llc_test_checks.py UTC_ARGS: --version 3
; RUN: llc -verify-machineinstrs -mtriple=powerpc-ibm-aix < %s | FileCheck --check-prefix=AIX-32 %s
; RUN: llc -tailcallopt -verify-machineinstrs -mtriple=powerpc-ibm-aix < %s | FileCheck --check-prefix=AIX-32-TCO %s
; RUN: llc -verify-machineinstrs -mtriple=powerpc64-ibm-aix < %s | FileCheck --check-prefix=AIX-64 %s
; RUN: llc -tailcallopt -verify-machineinstrs -mtriple=powerpc64-ibm-aix < %s | FileCheck --check-prefix=AIX-64-TCO %s

define hidden fastcc i32 @ff(i32 %a) {
; AIX-32-LABEL: ff:
; AIX-32:       # %bb.0: # %entry
; AIX-32-NEXT:    blr
;
; AIX-32-TCO-LABEL: ff:
; AIX-32-TCO:       # %bb.0: # %entry
; AIX-32-TCO-NEXT:    addi 1, 1, 64
; AIX-32-TCO-NEXT:    blr
;
; AIX-64-LABEL: ff:
; AIX-64:       # %bb.0: # %entry
; AIX-64-NEXT:    blr
;
; AIX-64-TCO-LABEL: ff:
; AIX-64-TCO:       # %bb.0: # %entry
; AIX-64-TCO-NEXT:    addi 1, 1, 112
; AIX-64-TCO-NEXT:    blr
entry:
  ret i32 %a
}

define fastcc i32 @f(i32 %a, i32 %b) {
; AIX-32-LABEL: f:
; AIX-32:       # %bb.0: # %entry
; AIX-32-NEXT:    mflr 0
; AIX-32-NEXT:    stwu 1, -64(1)
; AIX-32-NEXT:    stw 0, 72(1)
; AIX-32-NEXT:    bl .ff
; AIX-32-NEXT:    addi 1, 1, 64
; AIX-32-NEXT:    lwz 0, 8(1)
; AIX-32-NEXT:    mtlr 0
; AIX-32-NEXT:    blr
;
; AIX-32-TCO-LABEL: f:
; AIX-32-TCO:       # %bb.0: # %entry
; AIX-32-TCO-NEXT:    stwu 1, -64(1)
; AIX-32-TCO-NEXT:    lwz 4, 72(1)
; AIX-32-TCO-NEXT:    stw 4, 80(1)
; AIX-32-TCO-NEXT:    addi 1, 1, 72
; AIX-32-TCO-NEXT:    b .ff
; AIX-32-TCO-NEXT:    #TC_RETURNd .ff 8
;
; AIX-64-LABEL: f:
; AIX-64:       # %bb.0: # %entry
; AIX-64-NEXT:    mflr 0
; AIX-64-NEXT:    stdu 1, -112(1)
; AIX-64-NEXT:    clrldi 3, 3, 32
; AIX-64-NEXT:    std 0, 128(1)
; AIX-64-NEXT:    bl .ff
; AIX-64-NEXT:    addi 1, 1, 112
; AIX-64-NEXT:    ld 0, 16(1)
; AIX-64-NEXT:    mtlr 0
; AIX-64-NEXT:    blr
;
; AIX-64-TCO-LABEL: f:
; AIX-64-TCO:       # %bb.0: # %entry
; AIX-64-TCO-NEXT:    stdu 1, -112(1)
; AIX-64-TCO-NEXT:    clrldi 3, 3, 32
; AIX-64-TCO-NEXT:    addi 1, 1, 112
; AIX-64-TCO-NEXT:    b .ff
; AIX-64-TCO-NEXT:    #TC_RETURNd8 .ff 0
entry:
  %r = tail call fastcc i32 @ff(i32 %a)
  ret i32 %r
}
