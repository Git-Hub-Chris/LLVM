; NOTE: Assertions have been autogenerated by utils/update_llc_test_checks.py UTC_ARGS: --version 3
; RUN: llc -mtriple=riscv32 -O2 -verify-machineinstrs < %s | FileCheck %s --check-prefix=RV32
; RUN: llc -mtriple=riscv64 -O2 -verify-machineinstrs < %s | FileCheck %s --check-prefix=RV64

define void @u_case1_a(ptr %a, i32 %b, ptr %c, ptr %d) {
; RV32-LABEL: u_case1_a:
; RV32:       # %bb.0:
; RV32-NEXT:    li a4, 32
; RV32-NEXT:    sw a4, 0(a0)
; RV32-NEXT:    bgeu a1, a4, .LBB0_2
; RV32-NEXT:  # %bb.1: # %block1
; RV32-NEXT:    sw a1, 0(a2)
; RV32-NEXT:    ret
; RV32-NEXT:  .LBB0_2: # %block2
; RV32-NEXT:    li a0, 87
; RV32-NEXT:    sw a0, 0(a3)
; RV32-NEXT:    ret
;
; RV64-LABEL: u_case1_a:
; RV64:       # %bb.0:
; RV64-NEXT:    sext.w a4, a1
; RV64-NEXT:    li a5, 32
; RV64-NEXT:    sw a5, 0(a0)
; RV64-NEXT:    bgeu a4, a5, .LBB0_2
; RV64-NEXT:  # %bb.1: # %block1
; RV64-NEXT:    sw a1, 0(a2)
; RV64-NEXT:    ret
; RV64-NEXT:  .LBB0_2: # %block2
; RV64-NEXT:    li a0, 87
; RV64-NEXT:    sw a0, 0(a3)
; RV64-NEXT:    ret
  store i32 32, ptr %a
  %p = icmp ule i32 %b, 31
  br i1 %p, label %block1, label %block2

block1:                                           ; preds = %0
  store i32 %b, ptr %c
  br label %end_block

block2:                                           ; preds = %0
  store i32 87, ptr %d
  br label %end_block

end_block:                                        ; preds = %block2, %block1
  ret void
}

define void @case1_a(ptr %a, i32 %b, ptr %c, ptr %d) {
; RV32-LABEL: case1_a:
; RV32:       # %bb.0:
; RV32-NEXT:    li a4, -1
; RV32-NEXT:    sw a4, 0(a0)
; RV32-NEXT:    bge a1, a4, .LBB1_2
; RV32-NEXT:  # %bb.1: # %block1
; RV32-NEXT:    sw a1, 0(a2)
; RV32-NEXT:    ret
; RV32-NEXT:  .LBB1_2: # %block2
; RV32-NEXT:    li a0, 87
; RV32-NEXT:    sw a0, 0(a3)
; RV32-NEXT:    ret
;
; RV64-LABEL: case1_a:
; RV64:       # %bb.0:
; RV64-NEXT:    sext.w a4, a1
; RV64-NEXT:    li a5, -1
; RV64-NEXT:    sw a5, 0(a0)
; RV64-NEXT:    bge a4, a5, .LBB1_2
; RV64-NEXT:  # %bb.1: # %block1
; RV64-NEXT:    sw a1, 0(a2)
; RV64-NEXT:    ret
; RV64-NEXT:  .LBB1_2: # %block2
; RV64-NEXT:    li a0, 87
; RV64-NEXT:    sw a0, 0(a3)
; RV64-NEXT:    ret
  store i32 -1, ptr %a
  %p = icmp sle i32 %b, -2
  br i1 %p, label %block1, label %block2

block1:                                           ; preds = %0
  store i32 %b, ptr %c
  br label %end_block

block2:                                           ; preds = %0
  store i32 87, ptr %d
  br label %end_block

end_block:                                        ; preds = %block2, %block1
  ret void
}

define void @u_case2_a(ptr %a, i32 %b, ptr %c, ptr %d) {
; RV32-LABEL: u_case2_a:
; RV32:       # %bb.0:
; RV32-NEXT:    li a4, 32
; RV32-NEXT:    sw a4, 0(a0)
; RV32-NEXT:    bgeu a4, a1, .LBB2_2
; RV32-NEXT:  # %bb.1: # %block1
; RV32-NEXT:    sw a1, 0(a2)
; RV32-NEXT:    ret
; RV32-NEXT:  .LBB2_2: # %block2
; RV32-NEXT:    li a0, 87
; RV32-NEXT:    sw a0, 0(a3)
; RV32-NEXT:    ret
;
; RV64-LABEL: u_case2_a:
; RV64:       # %bb.0:
; RV64-NEXT:    sext.w a4, a1
; RV64-NEXT:    li a5, 32
; RV64-NEXT:    sw a5, 0(a0)
; RV64-NEXT:    bgeu a5, a4, .LBB2_2
; RV64-NEXT:  # %bb.1: # %block1
; RV64-NEXT:    sw a1, 0(a2)
; RV64-NEXT:    ret
; RV64-NEXT:  .LBB2_2: # %block2
; RV64-NEXT:    li a0, 87
; RV64-NEXT:    sw a0, 0(a3)
; RV64-NEXT:    ret
  store i32 32, ptr %a
  %p = icmp uge i32 %b, 33
  br i1 %p, label %block1, label %block2

block1:                                           ; preds = %0
  store i32 %b, ptr %c
  br label %end_block

block2:                                           ; preds = %0
  store i32 87, ptr %d
  br label %end_block

end_block:                                        ; preds = %block2, %block1
  ret void
}

define void @case2_a(ptr %a, i32 %b, ptr %c, ptr %d) {
; RV32-LABEL: case2_a:
; RV32:       # %bb.0:
; RV32-NEXT:    li a4, -4
; RV32-NEXT:    sw a4, 0(a0)
; RV32-NEXT:    bge a4, a1, .LBB3_2
; RV32-NEXT:  # %bb.1: # %block1
; RV32-NEXT:    sw a1, 0(a2)
; RV32-NEXT:    ret
; RV32-NEXT:  .LBB3_2: # %block2
; RV32-NEXT:    li a0, 87
; RV32-NEXT:    sw a0, 0(a3)
; RV32-NEXT:    ret
;
; RV64-LABEL: case2_a:
; RV64:       # %bb.0:
; RV64-NEXT:    sext.w a4, a1
; RV64-NEXT:    li a5, -4
; RV64-NEXT:    sw a5, 0(a0)
; RV64-NEXT:    bge a5, a4, .LBB3_2
; RV64-NEXT:  # %bb.1: # %block1
; RV64-NEXT:    sw a1, 0(a2)
; RV64-NEXT:    ret
; RV64-NEXT:  .LBB3_2: # %block2
; RV64-NEXT:    li a0, 87
; RV64-NEXT:    sw a0, 0(a3)
; RV64-NEXT:    ret
  store i32 -4, ptr %a
  %p = icmp sge i32 %b, -3
  br i1 %p, label %block1, label %block2

block1:                                           ; preds = %0
  store i32 %b, ptr %c
  br label %end_block

block2:                                           ; preds = %0
  store i32 87, ptr %d
  br label %end_block

end_block:                                        ; preds = %block2, %block1
  ret void
}
