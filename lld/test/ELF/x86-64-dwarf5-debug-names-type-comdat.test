// REQUIRES: x86
// RUN: llvm-mc -filetype=obj -triple=x86_64-unknown-linux %p/Inputs/dwarf5-debug-names-type-comdat.s -o %t.o
// RUN: llvm-mc -filetype=obj -triple=x86_64-unknown-linux %p/Inputs/dwarf5-debug-names-type-comdat.s -o %t1.o
// RUN: ld.lld %t.o %t1.o -o %t1
// RUN: llvm-objdump -s %t1 | FileCheck %s

// Test checks that LLD tombstones TU section that was de-duplicated using COMDAT to the maxium value.

CHECK:Contents of section .debug_names:
CHECK-NEXT: 0000 37000000 05000000 00000000 01000000  7...............
CHECK-NEXT: 0010 00000000 00000000 00000000 03000000  ................
CHECK-NEXT: 0020 08000000 4c4c564d 30373030 00000000  ....LLVM0700....
CHECK-NEXT: 0030 00000000 00000000 00000037 00000005  ...........7....
CHECK-NEXT: 0040 00000000 00000001 00000000 00000000  ................
CHECK-NEXT: 0050 00000000 00000003 00000008 0000004c  ...............L
CHECK-NEXT: 0060 4c564d30 37303000 000000ff ffffff00  LVM0700.........
